<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>Oracle学习笔记 | IT小王</title><meta name="description" content="Oracle学习笔记"><meta name="keywords" content="Oracle"><meta name="author" content="IT小王"><meta name="copyright" content="IT小王"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.svg"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Oracle学习笔记"><meta name="twitter:description" content="Oracle学习笔记"><meta name="twitter:image" content="https://wangbowen.cn/postImages/OracleCover.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Oracle学习笔记"><meta property="og:url" content="https://wangbowen.cn/2020/03/02/Oracle%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><meta property="og:site_name" content="IT小王"><meta property="og:description" content="Oracle学习笔记"><meta property="og:image" content="https://wangbowen.cn/postImages/OracleCover.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="https://wangbowen.cn/2020/03/02/Oracle%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><link rel="prev" title="ZooKeeper学习笔记" href="https://wangbowen.cn/2020/03/07/ZooKeeper%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><link rel="next" title="Linux学习笔记" href="https://wangbowen.cn/2020/02/28/Linux%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"ELVDUY5WGR","apiKey":"55783f8f2945106559981cc355ad5d57","indexName":"hexoSearch","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"http://wangbowen.cn/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"title":"Snackbar.bookmark.title","message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"top-center"},
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">IT小王</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">37</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">23</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">28</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#Oracle学习笔记"><span class="toc_mobile_items-text">Oracle学习笔记</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#一、数据库基本概念"><span class="toc_mobile_items-text">一、数据库基本概念</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-1-构成"><span class="toc_mobile_items-text">1.1 构成</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-2-特点"><span class="toc_mobile_items-text">1.2 特点</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-2-DBMS"><span class="toc_mobile_items-text">1.2 DBMS</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-3-数据库"><span class="toc_mobile_items-text">1.3 数据库</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#二、Oracle安装与启动"><span class="toc_mobile_items-text">二、Oracle安装与启动</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-1-版本"><span class="toc_mobile_items-text">2.1 版本</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-2-OEM数据库管理"><span class="toc_mobile_items-text">2.2 OEM数据库管理</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#优点"><span class="toc_mobile_items-text">优点</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#启动"><span class="toc_mobile_items-text">启动</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-3-SQL-Plus"><span class="toc_mobile_items-text">2.3 SQL Plus</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#三、结构"><span class="toc_mobile_items-text">三、结构</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-1-逻辑存储结构"><span class="toc_mobile_items-text">3.1 逻辑存储结构</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-2-数据块"><span class="toc_mobile_items-text">3.2 数据块</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-3-数据区"><span class="toc_mobile_items-text">3.3 数据区</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-4-段"><span class="toc_mobile_items-text">3.4 段</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-5-表空间"><span class="toc_mobile_items-text">3.5 表空间</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-6-总结（重要）"><span class="toc_mobile_items-text">3.6 总结（重要）</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#四、数据类型"><span class="toc_mobile_items-text">四、数据类型</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-1-CHAR-n-和-VARCHAR2-n"><span class="toc_mobile_items-text">4.1 CHAR(n) 和 VARCHAR2(n)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-2-NUMBER-m-n"><span class="toc_mobile_items-text">4.2 NUMBER(m, n)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-3-DATE-和-TIMESTAMP"><span class="toc_mobile_items-text">4.3 DATE 和 TIMESTAMP</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-4-CLOB-和-BLOB"><span class="toc_mobile_items-text">4.4 CLOB 和 BLOB</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#五、CURD命令操作"><span class="toc_mobile_items-text">五、CURD命令操作</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-1-创建表空间"><span class="toc_mobile_items-text">5.1 创建表空间</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-2-表操作"><span class="toc_mobile_items-text">5.2 表操作</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-2-1-CREATE-创建表"><span class="toc_mobile_items-text">5.2.1 CREATE 创建表</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-2-2-DROP-删除表"><span class="toc_mobile_items-text">5.2.2 DROP 删除表</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-2-3-ALTER-修改表"><span class="toc_mobile_items-text">5.2.3 ALTER 修改表</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#ADD-添加列"><span class="toc_mobile_items-text">ADD 添加列</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#MODIFY-修改字段类型"><span class="toc_mobile_items-text">MODIFY 修改字段类型</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#RENAME-修改字段名称"><span class="toc_mobile_items-text">RENAME 修改字段名称</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#DROP-删除字段"><span class="toc_mobile_items-text">DROP 删除字段</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-2-4-INSERT-INTO-插入记录"><span class="toc_mobile_items-text">5.2.4 INSERT INTO 插入记录</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-2-5-UPDATE-修改记录"><span class="toc_mobile_items-text">5.2.5 UPDATE 修改记录</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-2-6-DELETE-FROM-TRUNCATE-删除记录"><span class="toc_mobile_items-text">5.2.6 DELETE FROM (TRUNCATE) 删除记录</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-3-SELECT-查询数据"><span class="toc_mobile_items-text">5.3 SELECT 查询数据</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-3-1-选择、投影、连接"><span class="toc_mobile_items-text">5.3.1 选择、投影、连接</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-3-2-简单查询"><span class="toc_mobile_items-text">5.3.2 简单查询</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-3-3-子查询"><span class="toc_mobile_items-text">5.3.3 子查询</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-3-4-复杂查询"><span class="toc_mobile_items-text">5.3.4 复杂查询</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-3-5-空值比较"><span class="toc_mobile_items-text">5.3.5 空值比较</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-4-高级查询"><span class="toc_mobile_items-text">5.4 高级查询</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-4-1-LIKE-模糊查询"><span class="toc_mobile_items-text">5.4.1 LIKE 模糊查询</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-4-2-IN、ANY、ALL-范围关键字"><span class="toc_mobile_items-text">5.4.2 IN、ANY、ALL 范围关键字</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-4-3-BETWEEN-范围关键字"><span class="toc_mobile_items-text">5.4.3 BETWEEN 范围关键字</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-4-4-NULL-空值比较"><span class="toc_mobile_items-text">5.4.4 NULL 空值比较</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-4-5-INNER-JOIN-内连接"><span class="toc_mobile_items-text">5.4.5 INNER JOIN 内连接</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-4-6-LEFT-JOIN-左外连接"><span class="toc_mobile_items-text">5.4.6 LEFT JOIN 左外连接</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-4-7-RIGHT-JOIN-右外连接"><span class="toc_mobile_items-text">5.4.7 RIGHT JOIN 右外连接</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-4-8-FULL-JOIN-全外连接"><span class="toc_mobile_items-text">5.4.8 FULL JOIN 全外连接</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-4-9-NATURAL-JOIN-自然连接"><span class="toc_mobile_items-text">5.4.9 NATURAL JOIN 自然连接</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-4-10-自连接"><span class="toc_mobile_items-text">5.4.10 自连接</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-5-统计"><span class="toc_mobile_items-text">5.5 统计</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-5-1-聚合函数"><span class="toc_mobile_items-text">5.5.1 聚合函数</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-5-2-GROUP-BY-函数"><span class="toc_mobile_items-text">5.5.2 GROUP BY 函数</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-5-3-HAVING-子句"><span class="toc_mobile_items-text">5.5.3 HAVING 子句</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-5-4-ORDER-BY-排序"><span class="toc_mobile_items-text">5.5.4 ORDER BY 排序</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#六、视图"><span class="toc_mobile_items-text">六、视图</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6-1-创建、修改"><span class="toc_mobile_items-text">6.1 创建、修改</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6-2-查询"><span class="toc_mobile_items-text">6.2 查询</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6-3-更新"><span class="toc_mobile_items-text">6.3 更新</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6-4-删除视图"><span class="toc_mobile_items-text">6.4 删除视图</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#七、索引"><span class="toc_mobile_items-text">七、索引</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#7-1-创建索引"><span class="toc_mobile_items-text">7.1 创建索引</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#7-1-1-注意事项"><span class="toc_mobile_items-text">7.1.1 注意事项</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#7-1-2-B树索引（默认）"><span class="toc_mobile_items-text">7.1.2 B树索引（默认）</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#7-1-3-函数索引"><span class="toc_mobile_items-text">7.1.3 函数索引</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#7-1-4-位图索引"><span class="toc_mobile_items-text">7.1.4 位图索引</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#7-2-维护索引"><span class="toc_mobile_items-text">7.2 维护索引</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#7-2-1-修改索引名"><span class="toc_mobile_items-text">7.2.1 修改索引名</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#7-3-删除索引"><span class="toc_mobile_items-text">7.3 删除索引</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#八、数据的完整性和约束"><span class="toc_mobile_items-text">八、数据的完整性和约束</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#8-1-创建约束"><span class="toc_mobile_items-text">8.1 创建约束</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#8-1-1-SQL-CREATE-TABLE-CONSTRAINT-创建表时约束"><span class="toc_mobile_items-text">8.1.1 SQL CREATE TABLE + CONSTRAINT 创建表时约束</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#8-1-2-非空约束"><span class="toc_mobile_items-text">8.1.2 非空约束</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#8-1-3-主键约束"><span class="toc_mobile_items-text">8.1.3 主键约束</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#8-1-4-唯一性约束"><span class="toc_mobile_items-text">8.1.4 唯一性约束</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#8-1-5-外键约束"><span class="toc_mobile_items-text">8.1.5 外键约束</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#8-2-删除约束"><span class="toc_mobile_items-text">8.2 删除约束</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#8-3-禁用约束"><span class="toc_mobile_items-text">8.3 禁用约束</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#8-4-激活"><span class="toc_mobile_items-text">8.4 激活</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#九、PL-SQL"><span class="toc_mobile_items-text">九、PL&#x2F;SQL</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#9-1-运算符"><span class="toc_mobile_items-text">9.1 运算符</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-1-1-算术运算符"><span class="toc_mobile_items-text">9.1.1 算术运算符</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-1-2-关系运算符"><span class="toc_mobile_items-text">9.1.2 关系运算符</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-1-3-逻辑运算符"><span class="toc_mobile_items-text">9.1.3 逻辑运算符</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-1-4-其他"><span class="toc_mobile_items-text">9.1.4 其他</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#9-2-变量、常量、数据类型"><span class="toc_mobile_items-text">9.2 变量、常量、数据类型</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-2-1-定义变量、常量"><span class="toc_mobile_items-text">9.2.1 定义变量、常量</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-2-2-基本数据类型"><span class="toc_mobile_items-text">9.2.2 基本数据类型</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#数值类型"><span class="toc_mobile_items-text">数值类型</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#字符类型"><span class="toc_mobile_items-text">字符类型</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#日期类型"><span class="toc_mobile_items-text">日期类型</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#布尔类型"><span class="toc_mobile_items-text">布尔类型</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-2-3-特殊数据类型"><span class="toc_mobile_items-text">9.2.3 特殊数据类型</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#TYPE"><span class="toc_mobile_items-text">%TYPE</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#RECORD"><span class="toc_mobile_items-text">RECORD</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#ROWTYPE"><span class="toc_mobile_items-text">%ROWTYPE</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#9-3-基本程序结构和语句"><span class="toc_mobile_items-text">9.3 基本程序结构和语句</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-3-1-程序块"><span class="toc_mobile_items-text">9.3.1 程序块</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-3-2-选择语句"><span class="toc_mobile_items-text">9.3.2 选择语句</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-3-3-循环语句"><span class="toc_mobile_items-text">9.3.3 循环语句</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-3-4-选择和跳转"><span class="toc_mobile_items-text">9.3.4 选择和跳转</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-3-5-异常"><span class="toc_mobile_items-text">9.3.5 异常</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#9-4-系统内置函数"><span class="toc_mobile_items-text">9.4 系统内置函数</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#9-4-1-字符类"><span class="toc_mobile_items-text">9.4.1 字符类</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#ASCII-ch-字符转数字"><span class="toc_mobile_items-text">ASCII(ch) 字符转数字</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#CHR-i-数字转字符"><span class="toc_mobile_items-text">CHR(i) 数字转字符</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#CONCAT-s1-s2-字符串连接"><span class="toc_mobile_items-text">CONCAT(s1,s2) 字符串连接</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#INICAP-s-首字母大写"><span class="toc_mobile_items-text">INICAP(s) 首字母大写</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#INSTR-s1-s2-i-j-查询子字符串"><span class="toc_mobile_items-text">INSTR(s1,s2[,i] [,j]) 查询子字符串</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#LENGTH-s-计算长度"><span class="toc_mobile_items-text">LENGTH(s) 计算长度</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#LOWER-s-UPPER-s-小-大写"><span class="toc_mobile_items-text">LOWER(s) &#x2F; UPPER(s) 小&#x2F;大写</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#LTRIM-s1-s2-RTRIM-TRIM-左-右-左右清除字符串"><span class="toc_mobile_items-text">LTRIM(s1,s2) &#x2F; RTRIM &#x2F; TRIM 左&#x2F;右&#x2F;左右清除字符串</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#REPLACE-s1-s2-s3-替换"><span class="toc_mobile_items-text">REPLACE(s1,s2[,s3]) 替换</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#SUBSTR-s-i-j-取子串"><span class="toc_mobile_items-text">SUBSTR(s,i[,j]) 取子串</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#9-4-2-数字类"><span class="toc_mobile_items-text">9.4.2 数字类</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#ABS-n-绝对值"><span class="toc_mobile_items-text">ABS(n) 绝对值</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#CELL-n-向上取整"><span class="toc_mobile_items-text">CELL(n) 向上取整</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#COS-n-余弦【2PI-360°】"><span class="toc_mobile_items-text">COS(n) 余弦【2PI &#x3D; 360°】</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#EXP-n-n次幂"><span class="toc_mobile_items-text">EXP(n) n次幂</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#FLOOR-n-向下取整"><span class="toc_mobile_items-text">FLOOR(n) 向下取整</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#LOG-n1-n2-对数"><span class="toc_mobile_items-text">LOG(n1,n2) 对数</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#MOD-n1-n2-取余"><span class="toc_mobile_items-text">MOD(n1,n2) 取余</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#POWER-n1-n2-次方"><span class="toc_mobile_items-text">POWER(n1,n2) 次方</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#ROUND-n1-n2-四舍五入"><span class="toc_mobile_items-text">ROUND(n1,n2) 四舍五入</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#SIGN-n"><span class="toc_mobile_items-text">SIGN(n)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#SQTR-n-开方"><span class="toc_mobile_items-text">SQTR(n) 开方</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#TRUNC-n1-n2-截取小数"><span class="toc_mobile_items-text">TRUNC(n1,n2) 截取小数</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#9-4-3-日期和时间类"><span class="toc_mobile_items-text">9.4.3 日期和时间类</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#ADD-MONTHS-d-i"><span class="toc_mobile_items-text">ADD_MONTHS(d,i)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#LAST-DAY-d"><span class="toc_mobile_items-text">LAST_DAY(d)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#NEW-TIME-d1-t1-t2"><span class="toc_mobile_items-text">NEW_TIME(d1,t1,t2)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#SYSDATE-当前时间"><span class="toc_mobile_items-text">SYSDATE() 当前时间</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#9-4-4-转换类"><span class="toc_mobile_items-text">9.4.4 转换类</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#9-5-自定义函数"><span class="toc_mobile_items-text">9.5 自定义函数</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-5-1-函数的定义"><span class="toc_mobile_items-text">9.5.1 函数的定义</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-5-2-函数的调用"><span class="toc_mobile_items-text">9.5.2 函数的调用</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-5-3-函数的删除"><span class="toc_mobile_items-text">9.5.3 函数的删除</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#9-6-游标"><span class="toc_mobile_items-text">9.6 游标</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-6-1-显示游标"><span class="toc_mobile_items-text">9.6.1 显示游标</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#声明游标"><span class="toc_mobile_items-text">声明游标</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#打开游标"><span class="toc_mobile_items-text">打开游标</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#读取游标"><span class="toc_mobile_items-text">读取游标</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#关闭游标"><span class="toc_mobile_items-text">关闭游标</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#例子"><span class="toc_mobile_items-text">例子</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-6-2-隐式游标"><span class="toc_mobile_items-text">9.6.2 隐式游标</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-6-3-游标变量"><span class="toc_mobile_items-text">9.6.3 游标变量</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#声明游标变量"><span class="toc_mobile_items-text">声明游标变量</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#打开游标变量"><span class="toc_mobile_items-text">打开游标变量</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#例子-1"><span class="toc_mobile_items-text">例子</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#9-6-4-游标表达式（暂无，书上没例子）"><span class="toc_mobile_items-text">9.6.4 游标表达式（暂无，书上没例子）</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#十、程序包"><span class="toc_mobile_items-text">十、程序包</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#10-1-程序包的规范"><span class="toc_mobile_items-text">10.1 程序包的规范</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#10-2-程序包的主体"><span class="toc_mobile_items-text">10.2 程序包的主体</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#十一、存储过程"><span class="toc_mobile_items-text">十一、存储过程</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#11-1-创建-存储过程"><span class="toc_mobile_items-text">11.1 创建 存储过程</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#11-2-调用-存储过程"><span class="toc_mobile_items-text">11.2 调用 存储过程</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#11-3-删除-存储过程"><span class="toc_mobile_items-text">11.3 删除 存储过程</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#十二、触发器"><span class="toc_mobile_items-text">十二、触发器</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#12-1-创建-触发器"><span class="toc_mobile_items-text">12.1 创建 触发器</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#12-2-启用-禁用-触发器"><span class="toc_mobile_items-text">12.2 启用&#x2F;禁用 触发器</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#12-3-删除-触发器"><span class="toc_mobile_items-text">12.3 删除 触发器</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Oracle学习笔记"><span class="toc-text">Oracle学习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、数据库基本概念"><span class="toc-text">一、数据库基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-构成"><span class="toc-text">1.1 构成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-特点"><span class="toc-text">1.2 特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-DBMS"><span class="toc-text">1.2 DBMS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-数据库"><span class="toc-text">1.3 数据库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、Oracle安装与启动"><span class="toc-text">二、Oracle安装与启动</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-版本"><span class="toc-text">2.1 版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-OEM数据库管理"><span class="toc-text">2.2 OEM数据库管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#优点"><span class="toc-text">优点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#启动"><span class="toc-text">启动</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-SQL-Plus"><span class="toc-text">2.3 SQL Plus</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、结构"><span class="toc-text">三、结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-逻辑存储结构"><span class="toc-text">3.1 逻辑存储结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-数据块"><span class="toc-text">3.2 数据块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-数据区"><span class="toc-text">3.3 数据区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-段"><span class="toc-text">3.4 段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-表空间"><span class="toc-text">3.5 表空间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-总结（重要）"><span class="toc-text">3.6 总结（重要）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、数据类型"><span class="toc-text">四、数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-CHAR-n-和-VARCHAR2-n"><span class="toc-text">4.1 CHAR(n) 和 VARCHAR2(n)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-NUMBER-m-n"><span class="toc-text">4.2 NUMBER(m, n)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-DATE-和-TIMESTAMP"><span class="toc-text">4.3 DATE 和 TIMESTAMP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-CLOB-和-BLOB"><span class="toc-text">4.4 CLOB 和 BLOB</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五、CURD命令操作"><span class="toc-text">五、CURD命令操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-创建表空间"><span class="toc-text">5.1 创建表空间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-表操作"><span class="toc-text">5.2 表操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-1-CREATE-创建表"><span class="toc-text">5.2.1 CREATE 创建表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-2-DROP-删除表"><span class="toc-text">5.2.2 DROP 删除表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-3-ALTER-修改表"><span class="toc-text">5.2.3 ALTER 修改表</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ADD-添加列"><span class="toc-text">ADD 添加列</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#MODIFY-修改字段类型"><span class="toc-text">MODIFY 修改字段类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#RENAME-修改字段名称"><span class="toc-text">RENAME 修改字段名称</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#DROP-删除字段"><span class="toc-text">DROP 删除字段</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-4-INSERT-INTO-插入记录"><span class="toc-text">5.2.4 INSERT INTO 插入记录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-5-UPDATE-修改记录"><span class="toc-text">5.2.5 UPDATE 修改记录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-6-DELETE-FROM-TRUNCATE-删除记录"><span class="toc-text">5.2.6 DELETE FROM (TRUNCATE) 删除记录</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-SELECT-查询数据"><span class="toc-text">5.3 SELECT 查询数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-1-选择、投影、连接"><span class="toc-text">5.3.1 选择、投影、连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-2-简单查询"><span class="toc-text">5.3.2 简单查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-3-子查询"><span class="toc-text">5.3.3 子查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-4-复杂查询"><span class="toc-text">5.3.4 复杂查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-5-空值比较"><span class="toc-text">5.3.5 空值比较</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-高级查询"><span class="toc-text">5.4 高级查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-1-LIKE-模糊查询"><span class="toc-text">5.4.1 LIKE 模糊查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-2-IN、ANY、ALL-范围关键字"><span class="toc-text">5.4.2 IN、ANY、ALL 范围关键字</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-3-BETWEEN-范围关键字"><span class="toc-text">5.4.3 BETWEEN 范围关键字</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-4-NULL-空值比较"><span class="toc-text">5.4.4 NULL 空值比较</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-5-INNER-JOIN-内连接"><span class="toc-text">5.4.5 INNER JOIN 内连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-6-LEFT-JOIN-左外连接"><span class="toc-text">5.4.6 LEFT JOIN 左外连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-7-RIGHT-JOIN-右外连接"><span class="toc-text">5.4.7 RIGHT JOIN 右外连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-8-FULL-JOIN-全外连接"><span class="toc-text">5.4.8 FULL JOIN 全外连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-9-NATURAL-JOIN-自然连接"><span class="toc-text">5.4.9 NATURAL JOIN 自然连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-10-自连接"><span class="toc-text">5.4.10 自连接</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-统计"><span class="toc-text">5.5 统计</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-5-1-聚合函数"><span class="toc-text">5.5.1 聚合函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-5-2-GROUP-BY-函数"><span class="toc-text">5.5.2 GROUP BY 函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-5-3-HAVING-子句"><span class="toc-text">5.5.3 HAVING 子句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-5-4-ORDER-BY-排序"><span class="toc-text">5.5.4 ORDER BY 排序</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#六、视图"><span class="toc-text">六、视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-创建、修改"><span class="toc-text">6.1 创建、修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-查询"><span class="toc-text">6.2 查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-更新"><span class="toc-text">6.3 更新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-删除视图"><span class="toc-text">6.4 删除视图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#七、索引"><span class="toc-text">七、索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-创建索引"><span class="toc-text">7.1 创建索引</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-1-注意事项"><span class="toc-text">7.1.1 注意事项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-2-B树索引（默认）"><span class="toc-text">7.1.2 B树索引（默认）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-3-函数索引"><span class="toc-text">7.1.3 函数索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-4-位图索引"><span class="toc-text">7.1.4 位图索引</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-维护索引"><span class="toc-text">7.2 维护索引</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-1-修改索引名"><span class="toc-text">7.2.1 修改索引名</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-删除索引"><span class="toc-text">7.3 删除索引</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#八、数据的完整性和约束"><span class="toc-text">八、数据的完整性和约束</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-创建约束"><span class="toc-text">8.1 创建约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-1-SQL-CREATE-TABLE-CONSTRAINT-创建表时约束"><span class="toc-text">8.1.1 SQL CREATE TABLE + CONSTRAINT 创建表时约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-2-非空约束"><span class="toc-text">8.1.2 非空约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-3-主键约束"><span class="toc-text">8.1.3 主键约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-4-唯一性约束"><span class="toc-text">8.1.4 唯一性约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-5-外键约束"><span class="toc-text">8.1.5 外键约束</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-删除约束"><span class="toc-text">8.2 删除约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-禁用约束"><span class="toc-text">8.3 禁用约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-激活"><span class="toc-text">8.4 激活</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#九、PL-SQL"><span class="toc-text">九、PL&#x2F;SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-运算符"><span class="toc-text">9.1 运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-1-算术运算符"><span class="toc-text">9.1.1 算术运算符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-2-关系运算符"><span class="toc-text">9.1.2 关系运算符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-3-逻辑运算符"><span class="toc-text">9.1.3 逻辑运算符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-4-其他"><span class="toc-text">9.1.4 其他</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-变量、常量、数据类型"><span class="toc-text">9.2 变量、常量、数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-1-定义变量、常量"><span class="toc-text">9.2.1 定义变量、常量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-2-基本数据类型"><span class="toc-text">9.2.2 基本数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#数值类型"><span class="toc-text">数值类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#字符类型"><span class="toc-text">字符类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#日期类型"><span class="toc-text">日期类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#布尔类型"><span class="toc-text">布尔类型</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-3-特殊数据类型"><span class="toc-text">9.2.3 特殊数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#TYPE"><span class="toc-text">%TYPE</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#RECORD"><span class="toc-text">RECORD</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ROWTYPE"><span class="toc-text">%ROWTYPE</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-基本程序结构和语句"><span class="toc-text">9.3 基本程序结构和语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-3-1-程序块"><span class="toc-text">9.3.1 程序块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-3-2-选择语句"><span class="toc-text">9.3.2 选择语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-3-3-循环语句"><span class="toc-text">9.3.3 循环语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-3-4-选择和跳转"><span class="toc-text">9.3.4 选择和跳转</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-3-5-异常"><span class="toc-text">9.3.5 异常</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-系统内置函数"><span class="toc-text">9.4 系统内置函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#9-4-1-字符类"><span class="toc-text">9.4.1 字符类</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#ASCII-ch-字符转数字"><span class="toc-text">ASCII(ch) 字符转数字</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#CHR-i-数字转字符"><span class="toc-text">CHR(i) 数字转字符</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#CONCAT-s1-s2-字符串连接"><span class="toc-text">CONCAT(s1,s2) 字符串连接</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#INICAP-s-首字母大写"><span class="toc-text">INICAP(s) 首字母大写</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#INSTR-s1-s2-i-j-查询子字符串"><span class="toc-text">INSTR(s1,s2[,i] [,j]) 查询子字符串</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#LENGTH-s-计算长度"><span class="toc-text">LENGTH(s) 计算长度</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#LOWER-s-UPPER-s-小-大写"><span class="toc-text">LOWER(s) &#x2F; UPPER(s) 小&#x2F;大写</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#LTRIM-s1-s2-RTRIM-TRIM-左-右-左右清除字符串"><span class="toc-text">LTRIM(s1,s2) &#x2F; RTRIM &#x2F; TRIM 左&#x2F;右&#x2F;左右清除字符串</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#REPLACE-s1-s2-s3-替换"><span class="toc-text">REPLACE(s1,s2[,s3]) 替换</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#SUBSTR-s-i-j-取子串"><span class="toc-text">SUBSTR(s,i[,j]) 取子串</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-4-2-数字类"><span class="toc-text">9.4.2 数字类</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#ABS-n-绝对值"><span class="toc-text">ABS(n) 绝对值</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#CELL-n-向上取整"><span class="toc-text">CELL(n) 向上取整</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#COS-n-余弦【2PI-360°】"><span class="toc-text">COS(n) 余弦【2PI &#x3D; 360°】</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#EXP-n-n次幂"><span class="toc-text">EXP(n) n次幂</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#FLOOR-n-向下取整"><span class="toc-text">FLOOR(n) 向下取整</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#LOG-n1-n2-对数"><span class="toc-text">LOG(n1,n2) 对数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#MOD-n1-n2-取余"><span class="toc-text">MOD(n1,n2) 取余</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#POWER-n1-n2-次方"><span class="toc-text">POWER(n1,n2) 次方</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#ROUND-n1-n2-四舍五入"><span class="toc-text">ROUND(n1,n2) 四舍五入</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#SIGN-n"><span class="toc-text">SIGN(n)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#SQTR-n-开方"><span class="toc-text">SQTR(n) 开方</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#TRUNC-n1-n2-截取小数"><span class="toc-text">TRUNC(n1,n2) 截取小数</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-4-3-日期和时间类"><span class="toc-text">9.4.3 日期和时间类</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#ADD-MONTHS-d-i"><span class="toc-text">ADD_MONTHS(d,i)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#LAST-DAY-d"><span class="toc-text">LAST_DAY(d)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#NEW-TIME-d1-t1-t2"><span class="toc-text">NEW_TIME(d1,t1,t2)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#SYSDATE-当前时间"><span class="toc-text">SYSDATE() 当前时间</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-4-4-转换类"><span class="toc-text">9.4.4 转换类</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5-自定义函数"><span class="toc-text">9.5 自定义函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-5-1-函数的定义"><span class="toc-text">9.5.1 函数的定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-5-2-函数的调用"><span class="toc-text">9.5.2 函数的调用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-5-3-函数的删除"><span class="toc-text">9.5.3 函数的删除</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-游标"><span class="toc-text">9.6 游标</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-6-1-显示游标"><span class="toc-text">9.6.1 显示游标</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#声明游标"><span class="toc-text">声明游标</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#打开游标"><span class="toc-text">打开游标</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#读取游标"><span class="toc-text">读取游标</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#关闭游标"><span class="toc-text">关闭游标</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#例子"><span class="toc-text">例子</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-6-2-隐式游标"><span class="toc-text">9.6.2 隐式游标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-6-3-游标变量"><span class="toc-text">9.6.3 游标变量</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#声明游标变量"><span class="toc-text">声明游标变量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#打开游标变量"><span class="toc-text">打开游标变量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#例子-1"><span class="toc-text">例子</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-6-4-游标表达式（暂无，书上没例子）"><span class="toc-text">9.6.4 游标表达式（暂无，书上没例子）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十、程序包"><span class="toc-text">十、程序包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-程序包的规范"><span class="toc-text">10.1 程序包的规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-程序包的主体"><span class="toc-text">10.2 程序包的主体</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十一、存储过程"><span class="toc-text">十一、存储过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-创建-存储过程"><span class="toc-text">11.1 创建 存储过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-调用-存储过程"><span class="toc-text">11.2 调用 存储过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-删除-存储过程"><span class="toc-text">11.3 删除 存储过程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十二、触发器"><span class="toc-text">十二、触发器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1-创建-触发器"><span class="toc-text">12.1 创建 触发器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-启用-禁用-触发器"><span class="toc-text">12.2 启用&#x2F;禁用 触发器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-3-删除-触发器"><span class="toc-text">12.3 删除 触发器</span></a></li></ol></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(/postImages/OracleCover.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">Oracle学习笔记</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 发表于 2020-03-02<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> 更新于 2020-06-04</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/Oracle/">Oracle</a></span><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>阅读量:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="Oracle学习笔记"><a href="#Oracle学习笔记" class="headerlink" title="Oracle学习笔记"></a>Oracle学习笔记</h1><p>【菜鸟教程SQL】<a href="https://www.runoob.com/sql/sql-tutorial.html" target="_blank" rel="noopener">https://www.runoob.com/sql/sql-tutorial.html</a></p>
<h2 id="一、数据库基本概念"><a href="#一、数据库基本概念" class="headerlink" title="一、数据库基本概念"></a>一、数据库基本概念</h2><h3 id="1-1-构成"><a href="#1-1-构成" class="headerlink" title="1.1 构成"></a>1.1 构成</h3><p>数据、字段、记录</p>
<h3 id="1-2-特点"><a href="#1-2-特点" class="headerlink" title="1.2 特点"></a>1.2 特点</h3><ul>
<li>永久存储</li>
<li>有组织</li>
<li>可共享</li>
</ul>
<h3 id="1-2-DBMS"><a href="#1-2-DBMS" class="headerlink" title="1.2 DBMS"></a>1.2 DBMS</h3><p>数据库管理系统（管理数据）：</p>
<ul>
<li>软件</li>
<li>数据库</li>
<li>数据库管理员</li>
</ul>
<h3 id="1-3-数据库"><a href="#1-3-数据库" class="headerlink" title="1.3 数据库"></a>1.3 数据库</h3><p><a href="/postImages/DB.png" data-fancybox="group" data-caption="avatar" class="fancybox"><img alt="avatar" title="avatar" data-src="/postImages/DB.png" class="lazyload"></a></p>
<h2 id="二、Oracle安装与启动"><a href="#二、Oracle安装与启动" class="headerlink" title="二、Oracle安装与启动"></a>二、Oracle安装与启动</h2><h3 id="2-1-版本"><a href="#2-1-版本" class="headerlink" title="2.1 版本"></a>2.1 版本</h3><p><a href="/postImages/DB2.png" data-fancybox="group" data-caption="avatar" class="fancybox"><img alt="avatar" title="avatar" data-src="/postImages/DB2.png" class="lazyload"></a></p>
<h3 id="2-2-OEM数据库管理"><a href="#2-2-OEM数据库管理" class="headerlink" title="2.2 OEM数据库管理"></a>2.2 OEM数据库管理</h3><h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><p><a href="/postImages/DB3.png" data-fancybox="group" data-caption="avatar" class="fancybox"><img alt="avatar" title="avatar" data-src="/postImages/DB3.png" class="lazyload"></a></p>
<h4 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h4><p><a href="/postImages/DB4.png" data-fancybox="group" data-caption="avatar" class="fancybox"><img alt="avatar" title="avatar" data-src="/postImages/DB4.png" class="lazyload"></a></p>
<p><a href="/postImages/DB5.png" data-fancybox="group" data-caption="avatar" class="fancybox"><img alt="avatar" title="avatar" data-src="/postImages/DB5.png" class="lazyload"></a></p>
<h3 id="2-3-SQL-Plus"><a href="#2-3-SQL-Plus" class="headerlink" title="2.3 SQL Plus"></a>2.3 SQL Plus</h3><p>使用SQL Plus程序打开命令行窗口。</p>
<h2 id="三、结构"><a href="#三、结构" class="headerlink" title="三、结构"></a>三、结构</h2><h3 id="3-1-逻辑存储结构"><a href="#3-1-逻辑存储结构" class="headerlink" title="3.1 逻辑存储结构"></a>3.1 逻辑存储结构</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">数据库</span><br><span class="line">  - 表空间1</span><br><span class="line">  	- 段1</span><br><span class="line">  	  - 区1</span><br><span class="line">  	  	- 数据块</span><br><span class="line">  	  - 区2</span><br><span class="line">  	- 段2</span><br><span class="line">  	- 段3</span><br><span class="line">  - 表空间2</span><br><span class="line">  - 表空间3</span><br></pre></td></tr></table></figure></div>



<h3 id="3-2-数据块"><a href="#3-2-数据块" class="headerlink" title="3.2 数据块"></a>3.2 数据块</h3><p>Oracle逻辑存储结构中的最小逻辑单位。</p>
<p>大小由SB_BLOCK_SIZE决定。</p>
<p>组成：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">数据块</span><br><span class="line">  - 块头</span><br><span class="line">  	- 数据库标题</span><br><span class="line">  	- 表目录</span><br><span class="line">  	- 行目录</span><br><span class="line">  - 存储区</span><br><span class="line">    - 自由空间</span><br><span class="line">    - 行数据</span><br></pre></td></tr></table></figure></div>



<h3 id="3-3-数据区"><a href="#3-3-数据区" class="headerlink" title="3.3 数据区"></a>3.3 数据区</h3><p>由连续的数据块结合而成。</p>
<p>Oracle存储分配的最小单位。</p>
<h3 id="3-4-段"><a href="#3-4-段" class="headerlink" title="3.4 段"></a>3.4 段</h3><p>数据段：存储表中所有数据</p>
<p>索引段：存储表最佳查询的所有索引数据</p>
<p>临时段：存储表排序操作期间建立的临时表的数据</p>
<p>回滚段：存储修改之前的位置和值</p>
<h3 id="3-5-表空间"><a href="#3-5-表空间" class="headerlink" title="3.5 表空间"></a>3.5 表空间</h3><p>表空间是数据库的最大逻辑划分区域。</p>
<p>一个表空间有一个或多个数据据文件组成，一个数据文件只属于一个表空间。</p>
<p>表空间的大小是它对应的数据文件大小的总和。</p>
<p>默认创建的表空间</p>
<ul>
<li>系统表空间</li>
<li>辅助表空间</li>
<li>撤销表空间</li>
<li>用户表空间</li>
</ul>
<h3 id="3-6-总结（重要）"><a href="#3-6-总结（重要）" class="headerlink" title="3.6 总结（重要）"></a>3.6 总结（重要）</h3><p><a href="/postImages/%E7%BB%93%E6%9E%84.png" data-fancybox="group" data-caption="avatar" class="fancybox"><img alt="avatar" title="avatar" data-src="/postImages/%E7%BB%93%E6%9E%84.png" class="lazyload"></a></p>
<p><a href="/postImages/%E7%BB%93%E6%9E%842.png" data-fancybox="group" data-caption="avatar" class="fancybox"><img alt="avatar" title="avatar" data-src="/postImages/%E7%BB%93%E6%9E%842.png" class="lazyload"></a></p>
<p>【B站视频解释 5:18开始】<a href="https://www.bilibili.com/video/BV1AE411p79z?p=3" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1AE411p79z?p=3</a></p>
<ul>
<li>实例：在Oracle的数据库中可有多个实例，通常我们只用一个实例</li>
<li>用户：一个实例下有多个用户</li>
<li>表空间：一个实例下有个表空间，表空间是<strong>逻辑概念</strong>，一个表空间对应着一个或多个物理存储文件（.dbf或.ora）。<strong>也就是说表空间仅仅是一个概念，用户产生的数据存放在表空间（磁盘上对应目录）中仅此而已。</strong></li>
<li>用户和表空间的关系：一个用户有一个默认表空间。一个表空间可以为多个用户作为默认表空间，但是用户和用户之间的数据是隔离的，数据不会混。</li>
<li>Oracle数据源：<ul>
<li>driver：oracle.jdbc.OracleDriver</li>
<li>url：jdbc:oracle:thin:@localhost:1521:实例名</li>
<li>username</li>
<li>password</li>
</ul>
</li>
</ul>
<p><strong>TIP : 可以理解为用户就是MySQL中database的概念</strong></p>
<ul>
<li>模式：一个用户一般对应一个schema,该用户的schema名等于用户名，并作为该用户缺省schema。这也就是我们在企业管理器的方案下看到schema名都为数据库用户名的原因。Oracle数据库中不能新创建一个schema，要想创建一个schema，只能通过创建一个用户的方法解决(Oracle中虽然有create schema语句，但是它并不是用来创建一个schema的)，在创建一个用户的同时为这个用户创建一个与用户名同名的schem并作为该用户的缺省shcema。即schema的个数同user的个数相同，而且schema名字同user名字一一 对应并且相同，所有我们可以称schema为user的别名，虽然这样说并不准确，但是更容易理解一些。</li>
</ul>
<h2 id="四、数据类型"><a href="#四、数据类型" class="headerlink" title="四、数据类型"></a>四、数据类型</h2><h3 id="4-1-CHAR-n-和-VARCHAR2-n"><a href="#4-1-CHAR-n-和-VARCHAR2-n" class="headerlink" title="4.1 CHAR(n) 和 VARCHAR2(n)"></a>4.1 CHAR(n) 和 VARCHAR2(n)</h3><p><strong>字符串类型</strong></p>
<p>CHAR(N)：固定长度（速度快）</p>
<p>VARCHAR2(N)：长度可变（耗空间）</p>
<h3 id="4-2-NUMBER-m-n"><a href="#4-2-NUMBER-m-n" class="headerlink" title="4.2 NUMBER(m, n)"></a>4.2 NUMBER(m, n)</h3><p><strong>数字类型</strong></p>
<p>m：总位数</p>
<p>n：小数位数</p>
<p>m-n：整数位数</p>
<p>例子：</p>
<p>number(6,2) ==&gt; 1234.56</p>
<h3 id="4-3-DATE-和-TIMESTAMP"><a href="#4-3-DATE-和-TIMESTAMP" class="headerlink" title="4.3 DATE 和 TIMESTAMP"></a>4.3 DATE 和 TIMESTAMP</h3><p><strong>时间类型</strong></p>
<p>DATE：保存时间，不含毫秒</p>
<p>TIMESTAMP：精确到毫秒</p>
<h3 id="4-4-CLOB-和-BLOB"><a href="#4-4-CLOB-和-BLOB" class="headerlink" title="4.4 CLOB 和 BLOB"></a>4.4 CLOB 和 BLOB</h3><p><strong>大数据存储</strong></p>
<p>CLOB：可以存放海量文字（推荐）</p>
<p>BLOB：存放图片、电影、音乐等二进制文件</p>
<h2 id="五、CURD命令操作"><a href="#五、CURD命令操作" class="headerlink" title="五、CURD命令操作"></a>五、CURD命令操作</h2><h3 id="5-1-创建表空间"><a href="#5-1-创建表空间" class="headerlink" title="5.1 创建表空间"></a>5.1 创建表空间</h3><p>相当于MYSQL中的数据库。</p>
<p>注意：只有sys用户具有创建表空间的权限，除非sys给其他用户授权。</p>
<p><strong>SYS直接创建</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLESPACE</span> LiYu</span><br><span class="line">	<span class="comment">-- 存盘位置</span></span><br><span class="line">	<span class="keyword">DATAFILE</span> <span class="string">'G:\ORACLE\ORADATA\ORCL\LiYu.DBF'</span></span><br><span class="line">	<span class="comment">-- 存储大小</span></span><br><span class="line">	<span class="keyword">SIZE</span> <span class="number">50</span>M</span><br><span class="line">	<span class="comment">-- 本地管理</span></span><br><span class="line">	<span class="keyword">EXTENT</span> <span class="keyword">MANAGEMENT</span> <span class="keyword">LOCAL</span></span><br><span class="line">	<span class="comment">-- 自动扩容</span></span><br><span class="line">	<span class="keyword">AUTOALLOCATE</span>;</span><br></pre></td></tr></table></figure></div>

<p><strong>SYS授权</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 创建用户</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> wbw <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> Bow1024</span><br><span class="line">	<span class="keyword">ACCOUNT</span> <span class="keyword">UNLOCK</span></span><br><span class="line">    <span class="keyword">DEFAULT</span> <span class="keyword">TABLESPACE</span> LiYu;</span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 授权</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">CREATE</span> <span class="keyword">TABLESPACE</span> <span class="keyword">TO</span> wbw;</span><br><span class="line"><span class="comment">-- 赋予DBA权限（可选）还有其他角色 CONNECT 和 RESOURCE </span></span><br><span class="line"><span class="keyword">GRANT</span> DBA <span class="keyword">TO</span> wbw;</span><br></pre></td></tr></table></figure></div>



<h3 id="5-2-表操作"><a href="#5-2-表操作" class="headerlink" title="5.2 表操作"></a>5.2 表操作</h3><h4 id="5-2-1-CREATE-创建表"><a href="#5-2-1-CREATE-创建表" class="headerlink" title="5.2.1 CREATE 创建表"></a>5.2.1 CREATE 创建表</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名(</span><br><span class="line">	字段名称 字段类型 [<span class="keyword">DEFAULT</span> 默认值],</span><br><span class="line">    字段名称 字段类型 [<span class="keyword">DEFAULT</span> 默认值]</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<p><strong>注意：</strong></p>
<ul>
<li><p>表名要以字母开头（不建议汉字）</p>
</li>
<li><p>长度1~30个字符</p>
</li>
<li><p>不能用保留字</p>
</li>
</ul>
<p><strong>其他关键字</strong></p>
<ul>
<li>NOT NULL：非空</li>
<li>PRIMARY KEY：主键</li>
</ul>
<p><a href="undefined" data-fancybox="group" data-caption class="fancybox"><img alt title data-src class="lazyload"></a></p>
<h4 id="5-2-2-DROP-删除表"><a href="#5-2-2-DROP-删除表" class="headerlink" title="5.2.2 DROP 删除表"></a>5.2.2 DROP 删除表</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> 表名称;</span><br></pre></td></tr></table></figure></div>



<h4 id="5-2-3-ALTER-修改表"><a href="#5-2-3-ALTER-修改表" class="headerlink" title="5.2.3 ALTER 修改表"></a>5.2.3 ALTER 修改表</h4><h5 id="ADD-添加列"><a href="#ADD-添加列" class="headerlink" title="ADD 添加列"></a>ADD 添加列</h5><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span>(字段名 字段类型 <span class="keyword">DEFAULT</span> 默认值, ...);</span><br></pre></td></tr></table></figure></div>

<h5 id="MODIFY-修改字段类型"><a href="#MODIFY-修改字段类型" class="headerlink" title="MODIFY 修改字段类型"></a>MODIFY 修改字段类型</h5><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">MODIFY</span>(字段名 字段类型 <span class="keyword">DEFAULT</span> 默认值);</span><br></pre></td></tr></table></figure></div>

<h5 id="RENAME-修改字段名称"><a href="#RENAME-修改字段名称" class="headerlink" title="RENAME 修改字段名称"></a>RENAME 修改字段名称</h5><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">RENAME</span> <span class="keyword">COLUMN</span> 原名称 <span class="keyword">TO</span> 修改后名称;</span><br></pre></td></tr></table></figure></div>

<h5 id="DROP-删除字段"><a href="#DROP-删除字段" class="headerlink" title="DROP 删除字段"></a>DROP 删除字段</h5><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> <span class="keyword">COLUMN</span> 列名称;</span><br></pre></td></tr></table></figure></div>



<h4 id="5-2-4-INSERT-INTO-插入记录"><a href="#5-2-4-INSERT-INTO-插入记录" class="headerlink" title="5.2.4 INSERT INTO 插入记录"></a>5.2.4 INSERT INTO 插入记录</h4><p><strong>单条插入</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名(字段名, 字段名, ...) <span class="keyword">VALUES</span>(值, 值, ...);</span><br></pre></td></tr></table></figure></div>

<p><strong>批量插入</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">insert all into student values(&#39;张三&#39;, 18, to_date(&#39;2015-01-01&#39;,&#39;yyyy-mm-dd&#39;))</span><br><span class="line">into student values(&#39;李四&#39;, 17, to_date(&#39;1997-12-03&#39;,&#39;yyyy-mm-dd&#39;))</span><br><span class="line">into student values(&#39;王五&#39;, 17, to_date(&#39;2000-03-01&#39;,&#39;yyyy-mm-dd&#39;))</span><br><span class="line">select 1 from dual;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>和mysql不同，这里要用 <code>insert all into</code></li>
<li>和Mysql直接用逗号不一样，中间要用 <code>into 表名 values(...)</code>，但是不用逗号分割</li>
<li>最后一句要用 <code>select 1 from dual;</code>  </li>
</ul>
<h4 id="5-2-5-UPDATE-修改记录"><a href="#5-2-5-UPDATE-修改记录" class="headerlink" title="5.2.5 UPDATE 修改记录"></a>5.2.5 UPDATE 修改记录</h4><p><strong>更新单条记录</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> 表名 <span class="keyword">SET</span> 列名=新值 [条件];</span><br></pre></td></tr></table></figure></div>

<p><strong>批量更新</strong></p>
<p>添加where条件。</p>
<h4 id="5-2-6-DELETE-FROM-TRUNCATE-删除记录"><a href="#5-2-6-DELETE-FROM-TRUNCATE-删除记录" class="headerlink" title="5.2.6 DELETE FROM (TRUNCATE) 删除记录"></a>5.2.6 DELETE FROM (TRUNCATE) 删除记录</h4><p>删除指定条件记录，不加条件删除整个表：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> 表名 [条件];</span><br></pre></td></tr></table></figure></div>

<p>删除所有数据：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">table</span> 表名; <span class="comment">-- 推荐</span></span><br></pre></td></tr></table></figure></div>



<h3 id="5-3-SELECT-查询数据"><a href="#5-3-SELECT-查询数据" class="headerlink" title="5.3 SELECT 查询数据"></a>5.3 SELECT 查询数据</h3><h4 id="5-3-1-选择、投影、连接"><a href="#5-3-1-选择、投影、连接" class="headerlink" title="5.3.1 选择、投影、连接"></a>5.3.1 选择、投影、连接</h4><ul>
<li>选择：表中的一行记录</li>
<li>投影：表中的某几列</li>
<li>连接<ul>
<li>等值连接：表A的X列和表B的Y列值相等的组合成新的表</li>
<li>自然连接：在AB两表中相同字段列上，进行等值连接</li>
</ul>
</li>
</ul>
<h4 id="5-3-2-简单查询"><a href="#5-3-2-简单查询" class="headerlink" title="5.3.2 简单查询"></a>5.3.2 简单查询</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 【查询需求】<span class="keyword">FROM</span> 表名称 [表别名] [查询条件];</span><br></pre></td></tr></table></figure></div>

<p><strong>查询需求</strong></p>
<ul>
<li>DISTINCT：重复项过滤，只保留一条记录</li>
<li>*：查询所有列</li>
<li>列名称 [AS] [列别名]：查询指定列，多个列用逗号分隔</li>
</ul>
<p><strong>查询表：</strong></p>
<p>如果要查询多个表，FROM后面加上多个表名，用逗号隔开</p>
<h4 id="5-3-3-子查询"><a href="#5-3-3-子查询" class="headerlink" title="5.3.3 子查询"></a>5.3.3 子查询</h4><p>即将一个select语句的查询结果，作为另一个select语句的条件的查询。</p>
<p><strong>单行子查询</strong></p>
<p>只返回一个数值，如使用MAX()函数，返回一个最大值。</p>
<p><strong>多行子查询</strong></p>
<p>返回多行记录，可以理解为返回一个临时表。</p>
<h4 id="5-3-4-复杂查询"><a href="#5-3-4-复杂查询" class="headerlink" title="5.3.4 复杂查询"></a>5.3.4 复杂查询</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>子句 [ <span class="keyword">INTO</span> 子句 ] </span><br><span class="line"><span class="keyword">FROM</span> 子句</span><br><span class="line">[ <span class="keyword">WHERE</span> 子句 ] </span><br><span class="line">[ <span class="keyword">GROUP</span> <span class="keyword">BY</span> 子句] </span><br><span class="line">[ <span class="keyword">HAVING</span> 子句 ] </span><br><span class="line">[ <span class="keyword">ORDER</span> <span class="keyword">BY</span> 列名 <span class="keyword">ASC</span>|<span class="keyword">DESC</span> ]</span><br></pre></td></tr></table></figure></div>

<p><strong>注意：</strong></p>
<p>WHERE 后不能跟聚合函数</p>
<p>GROUP BY 后面可以跟聚合函数</p>
<p>ASC：升序、DESC：降序。可以有多个列，按顺序进行前后排序。</p>
<h4 id="5-3-5-空值比较"><a href="#5-3-5-空值比较" class="headerlink" title="5.3.5 空值比较"></a>5.3.5 空值比较</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">... where xxx is null;</span><br></pre></td></tr></table></figure></div>



<h3 id="5-4-高级查询"><a href="#5-4-高级查询" class="headerlink" title="5.4 高级查询"></a>5.4 高级查询</h3><h4 id="5-4-1-LIKE-模糊查询"><a href="#5-4-1-LIKE-模糊查询" class="headerlink" title="5.4.1 LIKE 模糊查询"></a>5.4.1 LIKE 模糊查询</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> column_name [<span class="keyword">NOT</span>] <span class="keyword">LIKE</span> pattern;</span><br></pre></td></tr></table></figure></div>

<p>在 SQL 中，通配符与 SQL LIKE 操作符一起使用。</p>
<p>SQL 通配符用于搜索表中的数据。</p>
<p>在 SQL 中，可使用以下通配符：</p>
<table>
<thead>
<tr>
<th align="left">通配符</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">%</td>
<td align="left">替代 0 个或多个字符</td>
</tr>
<tr>
<td align="left">_</td>
<td align="left">替代一个字符</td>
</tr>
<tr>
<td align="left">[<em>charlist</em>]</td>
<td align="left">字符列中的任何单一字符</td>
</tr>
<tr>
<td align="left">[^<em>charlist</em>] 或 [!<em>charlist</em>]</td>
<td align="left">不在字符</td>
</tr>
</tbody></table>
<h4 id="5-4-2-IN、ANY、ALL-范围关键字"><a href="#5-4-2-IN、ANY、ALL-范围关键字" class="headerlink" title="5.4.2 IN、ANY、ALL 范围关键字"></a>5.4.2 IN、ANY、ALL 范围关键字</h4><p><strong>IN</strong></p>
<p>IN 操作符允许您在 WHERE 子句中规定多个值。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> column_name [<span class="keyword">NOT</span>] <span class="keyword">IN</span> (value1,value2,...);</span><br></pre></td></tr></table></figure></div>

<p><strong>ANY</strong></p>
<p>查询符合条件中任意一个就可以。</p>
<p><strong>ALL</strong></p>
<p>查询符合所有条件的。</p>
<h4 id="5-4-3-BETWEEN-范围关键字"><a href="#5-4-3-BETWEEN-范围关键字" class="headerlink" title="5.4.3 BETWEEN 范围关键字"></a>5.4.3 BETWEEN 范围关键字</h4><p>BETWEEN 操作符选取介于两个值之间的数据范围内的值。这些值可以是数值、文本或者日期。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> column_name [<span class="keyword">NOT</span>] <span class="keyword">BETWEEN</span> value1 <span class="keyword">AND</span> value2;</span><br></pre></td></tr></table></figure></div>



<h4 id="5-4-4-NULL-空值比较"><a href="#5-4-4-NULL-空值比较" class="headerlink" title="5.4.4 NULL 空值比较"></a>5.4.4 NULL 空值比较</h4><p>NULL 值代表遗漏的未知数据。</p>
<p>默认地，表的列可以存放 NULL 值。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> LastName,FirstName,Address <span class="keyword">FROM</span> Persons</span><br><span class="line"><span class="keyword">WHERE</span> Address <span class="keyword">IS</span> [<span class="keyword">NOT</span>] <span class="literal">NULL</span></span><br></pre></td></tr></table></figure></div>



<h4 id="5-4-5-INNER-JOIN-内连接"><a href="#5-4-5-INNER-JOIN-内连接" class="headerlink" title="5.4.5 INNER JOIN 内连接"></a>5.4.5 INNER JOIN 内连接</h4><p>常用的多表关联查询，INNER关键字可以省略，当只使用JOIN时，表示内连接。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line">[<span class="keyword">INNER</span>] <span class="keyword">JOIN</span> table2</span><br><span class="line"><span class="keyword">ON</span> table1.column_name=table2.column_name;</span><br></pre></td></tr></table></figure></div>

<p><strong>注释：</strong>INNER JOIN 与 JOIN 是相同的。</p>
<p><a href="https://www.runoob.com/wp-content/uploads/2013/09/img_innerjoin.gif" target="_blank" rel="noopener" data-fancybox="group" data-caption="SQL INNER JOIN" class="fancybox"><img alt="SQL INNER JOIN" title="SQL INNER JOIN" data-src="https://www.runoob.com/wp-content/uploads/2013/09/img_innerjoin.gif" class="lazyload"></a></p>
<h4 id="5-4-6-LEFT-JOIN-左外连接"><a href="#5-4-6-LEFT-JOIN-左外连接" class="headerlink" title="5.4.6 LEFT JOIN 左外连接"></a>5.4.6 LEFT JOIN 左外连接</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">LEFT</span> [<span class="keyword">OUTER</span>] <span class="keyword">JOIN</span> table2</span><br><span class="line"><span class="keyword">ON</span> table1.column_name=table2.column_name;</span><br></pre></td></tr></table></figure></div>

<p><strong>注释：</strong>在某些数据库中，LEFT JOIN 称为 LEFT OUTER JOIN。</p>
<p><a href="https://www.runoob.com/wp-content/uploads/2013/09/img_leftjoin.gif" target="_blank" rel="noopener" data-fancybox="group" data-caption="SQL LEFT JOIN" class="fancybox"><img alt="SQL LEFT JOIN" title="SQL LEFT JOIN" data-src="https://www.runoob.com/wp-content/uploads/2013/09/img_leftjoin.gif" class="lazyload"></a></p>
<h4 id="5-4-7-RIGHT-JOIN-右外连接"><a href="#5-4-7-RIGHT-JOIN-右外连接" class="headerlink" title="5.4.7 RIGHT JOIN 右外连接"></a>5.4.7 RIGHT JOIN 右外连接</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">RIGHT</span> [<span class="keyword">OUTER</span>] <span class="keyword">JOIN</span> table2</span><br><span class="line"><span class="keyword">ON</span> table1.column_name=table2.column_name;</span><br></pre></td></tr></table></figure></div>

<p><strong>注释：</strong>在某些数据库中，RIGHT JOIN 称为 RIGHT OUTER JOIN。</p>
<p><a href="https://www.runoob.com/wp-content/uploads/2013/09/img_rightjoin.gif" target="_blank" rel="noopener" data-fancybox="group" data-caption="SQL RIGHT JOIN" class="fancybox"><img alt="SQL RIGHT JOIN" title="SQL RIGHT JOIN" data-src="https://www.runoob.com/wp-content/uploads/2013/09/img_rightjoin.gif" class="lazyload"></a></p>
<h4 id="5-4-8-FULL-JOIN-全外连接"><a href="#5-4-8-FULL-JOIN-全外连接" class="headerlink" title="5.4.8 FULL JOIN 全外连接"></a>5.4.8 FULL JOIN 全外连接</h4><p>FULL OUTER JOIN 关键字只要左表（table1）和右表（table2）其中一个表中存在匹配，则返回行.</p>
<p>FULL OUTER JOIN 关键字结合了 LEFT JOIN 和 RIGHT JOIN 的结果。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">FULL</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> table2</span><br><span class="line"><span class="keyword">ON</span> table1.column_name=table2.column_name;</span><br></pre></td></tr></table></figure></div>

<p><a href="https://www.runoob.com/wp-content/uploads/2013/09/img_fulljoin.gif" target="_blank" rel="noopener" data-fancybox="group" data-caption="SQL FULL OUTER JOIN" class="fancybox"><img alt="SQL FULL OUTER JOIN" title="SQL FULL OUTER JOIN" data-src="https://www.runoob.com/wp-content/uploads/2013/09/img_fulljoin.gif" class="lazyload"></a></p>
<h4 id="5-4-9-NATURAL-JOIN-自然连接"><a href="#5-4-9-NATURAL-JOIN-自然连接" class="headerlink" title="5.4.9 NATURAL JOIN 自然连接"></a>5.4.9 NATURAL JOIN 自然连接</h4><p>Oracle会将第一个表中的列与第二个表中的列具有相同名称的列进行自动连接。用户不需要明确指定列，由系统自动完成。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> empno,ename,job,dname</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> table2</span><br><span class="line"><span class="keyword">WHERE</span> 条件;</span><br></pre></td></tr></table></figure></div>



<h4 id="5-4-10-自连接"><a href="#5-4-10-自连接" class="headerlink" title="5.4.10 自连接"></a>5.4.10 自连接</h4><p>自连接主要用在自参考表上显示上下级关系或层次关系。</p>
<h3 id="5-5-统计"><a href="#5-5-统计" class="headerlink" title="5.5 统计"></a>5.5 统计</h3><h4 id="5-5-1-聚合函数"><a href="#5-5-1-聚合函数" class="headerlink" title="5.5.1 聚合函数"></a>5.5.1 聚合函数</h4><ul>
<li>AVG：平均数</li>
<li>COUNT</li>
<li>MAX</li>
<li>MIN</li>
<li>SUM</li>
<li>VARIANCE：方差</li>
<li>STDDEV：标准差</li>
</ul>
<h4 id="5-5-2-GROUP-BY-函数"><a href="#5-5-2-GROUP-BY-函数" class="headerlink" title="5.5.2 GROUP BY 函数"></a>5.5.2 GROUP BY 函数</h4><p>经常于聚集函数一起使用。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> job,<span class="keyword">avg</span>(sal),<span class="keyword">sum</span>(sal),<span class="keyword">max</span>(sal),<span class="keyword">count</span>(sal) <span class="keyword">from</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> job;</span><br></pre></td></tr></table></figure></div>



<h4 id="5-5-3-HAVING-子句"><a href="#5-5-3-HAVING-子句" class="headerlink" title="5.5.3 HAVING 子句"></a>5.5.3 HAVING 子句</h4><p>通常与GROUP BY一起使用，吐过没有GROUP BY那么与WHERE效果一样。</p>
<p>但是HAVING子句中可以包含聚合函数，WHERE则不可以。</p>
<h4 id="5-5-4-ORDER-BY-排序"><a href="#5-5-4-ORDER-BY-排序" class="headerlink" title="5.5.4 ORDER BY 排序"></a>5.5.4 ORDER BY 排序</h4><ul>
<li>ASC：升序（默认）</li>
<li>DESC：降序</li>
</ul>
<h2 id="六、视图"><a href="#六、视图" class="headerlink" title="六、视图"></a>六、视图</h2><p>一个虚拟表，视图并不在数据库中存储数据值。但是对视图进行修改数据，实际上就是再修改实际数据，修改实际表也会影响视图。</p>
<h3 id="6-1-创建、修改"><a href="#6-1-创建、修改" class="headerlink" title="6.1 创建、修改"></a>6.1 创建、修改</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">OR</span> <span class="keyword">REPLACE</span>] <span class="keyword">VIEW</span> &lt;视图名&gt; [别名]</span><br><span class="line"><span class="keyword">AS</span> &lt;查询子句&gt;</span><br><span class="line">[<span class="keyword">with</span> <span class="keyword">read</span> <span class="keyword">only</span>]</span><br></pre></td></tr></table></figure></div>



<h3 id="6-2-查询"><a href="#6-2-查询" class="headerlink" title="6.2 查询"></a>6.2 查询</h3><p>查询视图就和查询普通的数据表一样的操作</p>
<h3 id="6-3-更新"><a href="#6-3-更新" class="headerlink" title="6.3 更新"></a>6.3 更新</h3><p>可更新视图满足以下条件:</p>
<ul>
<li>没有使用连接函数、聚合函数和组函数;</li>
<li>创建视图的 SELECT语句中没有聚合函数且没有 GROUP BY、 ONNECT BY、<br> START WITDISTINCT子句及关键字</li>
<li>创建视图没有包含只读属性。</li>
</ul>
<p>然后就和操作普通表一样进行INSERT \ UPDATE \ DELETE</p>
<h3 id="6-4-删除视图"><a href="#6-4-删除视图" class="headerlink" title="6.4 删除视图"></a>6.4 删除视图</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> 视图名;</span><br></pre></td></tr></table></figure></div>



<h2 id="七、索引"><a href="#七、索引" class="headerlink" title="七、索引"></a>七、索引</h2><p>如果不用索引，那么查询的时候会把表里全部记录都读取出来。用了索引后，只读取索引列。然后根据ROWID快速找到表中对应记录。</p>
<h3 id="7-1-创建索引"><a href="#7-1-创建索引" class="headerlink" title="7.1 创建索引"></a>7.1 创建索引</h3><p>创建表时，如果表中包含唯一关键字或主关键字，会自动为这两种关键字所包含的列建立索引。</p>
<p>在创建索引时，Oracle首先对将要建立索引的字段进行排序，然后将排序后的字段值和对应记录的ROWID存储在索引段中。</p>
<h4 id="7-1-1-注意事项"><a href="#7-1-1-注意事项" class="headerlink" title="7.1.1 注意事项"></a>7.1.1 注意事项</h4><ol>
<li>索引应该建立在 <strong>WHERE子句频繁引用表列</strong>上,如果在大表上频繁使用某列或某几个列作为条件执行索引操作,并<strong>且检索行数低于总行数15%</strong>,那么应该考虑在这些列上建立索引。</li>
<li><strong>限制表中索引的个数</strong>。索引主要用于加快查询速度,但<strong>会降低DM操作的速度</strong>。索引越多,DM操作速度越慢,尤其会极大地影响 INSERT和DELETE操作的速度。因此,规划索引时,必须仔细权衡查询和DML的需求。</li>
<li>指定索引块空间的使用参数。基于表建立索引时, Oracle会将相应表列数据添加到索引块。为索引块添加数据时, OraclePCTFREE会按照参数在索引块上预留部分空间,该预留空间时为将来的 INSERT操作准备的。如果将来在表上执行大量 INSERT操作,那么应该在建立索引时设置较大的 PCTFREE</li>
<li><strong>将表和索引部署到相同的表空间</strong>,可以简化表空间的管理;将表和索引部署到不同的表空间,可以提高访问性能。</li>
<li>当在大表上建立索时,<strong>使用 NOLOGGING选项可以最小化重做记录使用选项</strong>可以节省重做日志空间、降低索引建立时间、提高索引并行建立的性能。<strong>不要在小表上建立索引</strong>。</li>
<li>为了提高多表连接的性能,应该<strong>在连接列上建立索引</strong>。</li>
</ol>
<h4 id="7-1-2-B树索引（默认）"><a href="#7-1-2-B树索引（默认）" class="headerlink" title="7.1.2 B树索引（默认）"></a>7.1.2 B树索引（默认）</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> 索引名 <span class="keyword">ON</span> 表名(列名[<span class="keyword">ASC</span>|<span class="keyword">DESC</span>], ...) [pctfree 预留空闲空间值] [<span class="keyword">tablespace</span> 索引段所在的表空间];</span><br></pre></td></tr></table></figure></div>



<h4 id="7-1-3-函数索引"><a href="#7-1-3-函数索引" class="headerlink" title="7.1.3 函数索引"></a>7.1.3 函数索引</h4><p>让索引有一定的计算能力。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> 索引名 <span class="keyword">ON</span> 表名(<span class="keyword">LOWER</span>(ename));</span><br></pre></td></tr></table></figure></div>



<h4 id="7-1-4-位图索引"><a href="#7-1-4-位图索引" class="headerlink" title="7.1.4 位图索引"></a>7.1.4 位图索引</h4><p>当列的基数很低时，为其建立B树索引显然不合适。“基数低”表示在索引列中，所有取值的数量比表中行的数据量少。（如，性别，只有男或者女两个选项。但是，记录却有10 000条。Oracle推荐当一个列的基数小于1%时，不建议用B树，而用位图索引）</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">BITMAP</span> <span class="keyword">INDEX</span> 索引名 <span class="keyword">ON</span> 表名(列名[<span class="keyword">ASC</span>|<span class="keyword">DESC</span>], ...);</span><br></pre></td></tr></table></figure></div>



<h3 id="7-2-维护索引"><a href="#7-2-维护索引" class="headerlink" title="7.2 维护索引"></a>7.2 维护索引</h3><h4 id="7-2-1-修改索引名"><a href="#7-2-1-修改索引名" class="headerlink" title="7.2.1 修改索引名"></a>7.2.1 修改索引名</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">INDEX</span> 索引名 <span class="keyword">RENAME</span> <span class="keyword">TO</span> 新索引名;</span><br></pre></td></tr></table></figure></div>



<h3 id="7-3-删除索引"><a href="#7-3-删除索引" class="headerlink" title="7.3 删除索引"></a>7.3 删除索引</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">INDEX</span> 索引名;</span><br></pre></td></tr></table></figure></div>



<h2 id="八、数据的完整性和约束"><a href="#八、数据的完整性和约束" class="headerlink" title="八、数据的完整性和约束"></a>八、数据的完整性和约束</h2><p>SQL 约束用于规定表中的数据规则。</p>
<p>如果存在违反约束的数据行为，行为会被约束终止。</p>
<p>约束可以在创建表时规定（通过 CREATE TABLE 语句），或者在表创建之后规定（通过 ALTER TABLE 语句）。</p>
<h3 id="8-1-创建约束"><a href="#8-1-创建约束" class="headerlink" title="8.1 创建约束"></a>8.1 创建约束</h3><h4 id="8-1-1-SQL-CREATE-TABLE-CONSTRAINT-创建表时约束"><a href="#8-1-1-SQL-CREATE-TABLE-CONSTRAINT-创建表时约束" class="headerlink" title="8.1.1 SQL CREATE TABLE + CONSTRAINT 创建表时约束"></a>8.1.1 SQL CREATE TABLE + CONSTRAINT 创建表时约束</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> *table_name*</span><br><span class="line">(</span><br><span class="line">    *column_name1 data_type*(*<span class="keyword">size</span>*) *constraint_name*,</span><br><span class="line">    *column_name2 data_type*(*<span class="keyword">size</span>*) *constraint_name*,</span><br><span class="line">    *column_name3 data_type*(*<span class="keyword">size</span>*) *constraint_name*,</span><br><span class="line">    ....</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<p>在 SQL 中，我们有如下约束：</p>
<ul>
<li><strong>NOT NULL</strong> - 指示某列不能存储 NULL 值。</li>
<li><strong>UNIQUE</strong> - 保证某列的每行必须有唯一的值。</li>
<li><strong>PRIMARY KEY</strong> - NOT NULL 和 UNIQUE 的结合。确保某列（或两个列多个列的结合）有唯一标识，有助于更容易更快速地找到表中的一个特定的记录。</li>
<li><strong>FOREIGN KEY</strong> - 保证一个表中的数据匹配另一个表中的值的参照完整性。</li>
<li><strong>CHECK</strong> - 保证列中的值符合指定的条件。</li>
<li><strong>DEFAULT</strong> - 规定没有给列赋值时的默认值。</li>
</ul>
<h4 id="8-1-2-非空约束"><a href="#8-1-2-非空约束" class="headerlink" title="8.1.2 非空约束"></a>8.1.2 非空约束</h4><p>空值（NULL），不存在的值。而不是0或者空字符串。</p>
<p><strong>创建表时约束</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- not null</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> Books &#123;</span><br><span class="line">	BookNo <span class="built_in">number</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	bookname <span class="built_in">varchar2</span>(<span class="number">20</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>

<p><strong>已经存在的表</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> books <span class="keyword">modify</span> bookname <span class="keyword">not</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure></div>



<h4 id="8-1-3-主键约束"><a href="#8-1-3-主键约束" class="headerlink" title="8.1.3 主键约束"></a>8.1.3 主键约束</h4><p>主键约束 = 非空约束 + 唯一性约束</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- primary key</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> member3 &#123;</span><br><span class="line">	<span class="keyword">mid</span> <span class="built_in">number</span> primary <span class="keyword">key</span>,			<span class="comment">-- 主键约束 = 非空约束 + 唯一性约束</span></span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">varchar2</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>,		<span class="comment">-- 非空约束</span></span><br><span class="line">	email <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">constraint</span> email_uk <span class="keyword">unique</span>		<span class="comment">-- constraint约束，约束名，唯一约束</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="8-1-4-唯一性约束"><a href="#8-1-4-唯一性约束" class="headerlink" title="8.1.4 唯一性约束"></a>8.1.4 唯一性约束</h4><p>上面例子中的Email</p>
<h4 id="8-1-5-外键约束"><a href="#8-1-5-外键约束" class="headerlink" title="8.1.5 外键约束"></a>8.1.5 外键约束</h4><p><strong>创表时候</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE departments(</span><br><span class="line">	dep_id NUMBER primary key,</span><br><span class="line">	dep_name VARCHAR2(20)	</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE employees(</span><br><span class="line">	emp_id NUMBER primary key,</span><br><span class="line">	emp_name VARCHAR2(20),</span><br><span class="line">	dep_id,</span><br><span class="line">	foreign key(dep_id) references departments(dep_id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<p><strong>创表之后</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">constraint</span> 约束名</span><br><span class="line"><span class="keyword">foreign</span> <span class="keyword">key</span>(本表列名)</span><br><span class="line"><span class="keyword">references</span> 其他表名(其他列名)</span><br></pre></td></tr></table></figure></div>

<p>如果两个列名相同，第二个可以省略。</p>
<ul>
<li>在定义外键约束时，还可以通过关键字<code>NO ACTION</code> ，那么当删除被引用表中被引用列的数据时将违反外键约束。</li>
<li>使用<code>SET NULL</code>关键字，那么当删除被引用表中被引用列的数据时，外键表中外键列被设置为NULL。要注意外键列必须要支持NULL值</li>
<li>使用<code>CASCADE</code>关键字，那么当删除被引用表中被引用列的数据时，外键表中对应的数据也将被删除（即，级联删除）</li>
</ul>
<h3 id="8-2-删除约束"><a href="#8-2-删除约束" class="headerlink" title="8.2 删除约束"></a>8.2 删除约束</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> <span class="keyword">constraint</span> 约束名;</span><br></pre></td></tr></table></figure></div>



<h3 id="8-3-禁用约束"><a href="#8-3-禁用约束" class="headerlink" title="8.3 禁用约束"></a>8.3 禁用约束</h3><p>如果直到要插入的数据都是符合条件的，那么可以在插入的时候先关闭约束检查。以达到提高性能。</p>
<ol>
<li><p>在定义约束时禁用（disable）</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名 (</span><br><span class="line">	Age <span class="built_in">int</span> <span class="keyword">constraint</span> Age_CK <span class="keyword">check</span> (age &gt; <span class="number">0</span> <span class="keyword">and</span> age &lt; <span class="number">120</span>) <span class="keyword">disable</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>禁用已经存在的约束</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">disable</span> <span class="keyword">constraint</span> 约束名;</span><br></pre></td></tr></table></figure></div>



</li>
</ol>
<h3 id="8-4-激活"><a href="#8-4-激活" class="headerlink" title="8.4 激活"></a>8.4 激活</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">enable</span> [<span class="keyword">novalidate</span> | <span class="keyword">validate</span>] <span class="keyword">constraint</span> 约束名;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>novalidate：表示在激活约束时不验证表中已经存在的数据是否满足约束，如过没有该关键字，或者使用validate关键字，则在激活的时候检查。</li>
</ul>
<h2 id="九、PL-SQL"><a href="#九、PL-SQL" class="headerlink" title="九、PL/SQL"></a>九、PL/SQL</h2><h3 id="9-1-运算符"><a href="#9-1-运算符" class="headerlink" title="9.1 运算符"></a>9.1 运算符</h3><h4 id="9-1-1-算术运算符"><a href="#9-1-1-算术运算符" class="headerlink" title="9.1.1 算术运算符"></a>9.1.1 算术运算符</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+</span><br><span class="line">-	（对日期也有效）</span><br><span class="line">*</span><br><span class="line">&#x2F;</span><br><span class="line">**	（指数）</span><br><span class="line">||	（连接字符）</span><br></pre></td></tr></table></figure></div>

<p> extract(year from date1)，改函数用来取date1的年部分。</p>
<h4 id="9-1-2-关系运算符"><a href="#9-1-2-关系运算符" class="headerlink" title="9.1.2 关系运算符"></a>9.1.2 关系运算符</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x3D;、 &lt;&gt;或!&#x3D; 、 &lt;、 &gt;、 &gt;&#x3D;、 &lt;&#x3D;</span><br><span class="line">BETWEEN ... END ...</span><br><span class="line">IN ...</span><br><span class="line">LIKE ...</span><br><span class="line">... IS NULL</span><br></pre></td></tr></table></figure></div>



<h4 id="9-1-3-逻辑运算符"><a href="#9-1-3-逻辑运算符" class="headerlink" title="9.1.3 逻辑运算符"></a>9.1.3 逻辑运算符</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">AND</span><br><span class="line">OR </span><br><span class="line">NOT</span><br></pre></td></tr></table></figure></div>



<h4 id="9-1-4-其他"><a href="#9-1-4-其他" class="headerlink" title="9.1.4 其他"></a>9.1.4 其他</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">:&#x3D;	赋值符号</span><br></pre></td></tr></table></figure></div>



<h3 id="9-2-变量、常量、数据类型"><a href="#9-2-变量、常量、数据类型" class="headerlink" title="9.2 变量、常量、数据类型"></a>9.2 变量、常量、数据类型</h3><h4 id="9-2-1-定义变量、常量"><a href="#9-2-1-定义变量、常量" class="headerlink" title="9.2.1 定义变量、常量"></a>9.2.1 定义变量、常量</h4><ol>
<li><p>变量</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang"></div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;变量名&gt; &lt;数据类型&gt; [(长度):=&lt;初始值&gt;];</span><br></pre></td></tr></table></figure></div>

<p>长度并不是所有类型都有的。</p>
</li>
<li><p>常量</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang"></div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;常量名&gt; constant &lt;数据类型&gt;:=&lt;常量值&gt;;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>初始化：如果没有赋值，那么自动为<strong>NULL</strong></p>
</li>
</ol>
<h4 id="9-2-2-基本数据类型"><a href="#9-2-2-基本数据类型" class="headerlink" title="9.2.2 基本数据类型"></a>9.2.2 基本数据类型</h4><h5 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h5><ul>
<li>NUMBER、NUMBER(P, S)：整数和浮点数</li>
<li>PLS_INTEGER、BINARY_INTEGER：只能存整数</li>
</ul>
<h5 id="字符类型"><a href="#字符类型" class="headerlink" title="字符类型"></a>字符类型</h5><ul>
<li>VARCHAR2(maxlength)：maxlength最大值是32767字节，数据库里的是4000字节。不能赋值给数据库的，只能给LONG。</li>
<li>CHAR(maxlength)：最大长度32767字节，默认长度是1。后面空格补齐</li>
<li>LONG：可变字符串</li>
<li>NCHAR、NVARCHAR2：PL/SQL8.0以后加入的</li>
</ul>
<h5 id="日期类型"><a href="#日期类型" class="headerlink" title="日期类型"></a>日期类型</h5><ul>
<li>DATE：7字节，分别存世纪、年、月、天、时、分、秒</li>
</ul>
<h5 id="布尔类型"><a href="#布尔类型" class="headerlink" title="布尔类型"></a>布尔类型</h5><ul>
<li>BOOLEAN：取值为TRUE,FALSE,NULL</li>
</ul>
<h4 id="9-2-3-特殊数据类型"><a href="#9-2-3-特殊数据类型" class="headerlink" title="9.2.3 特殊数据类型"></a>9.2.3 特殊数据类型</h4><h5 id="TYPE"><a href="#TYPE" class="headerlink" title="%TYPE"></a>%TYPE</h5><p>根据已有字段数据类型自动推断</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var_name 表名.列名%TYPE</span><br></pre></td></tr></table></figure></div>

<h5 id="RECORD"><a href="#RECORD" class="headerlink" title="RECORD"></a>RECORD</h5><p>可以理解为自定义结构类型，可以存储由多个列值组成的一行数据。</p>
<p>要先定义，才能声明（和C语言的结构体那样）</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">type my_record_type is record (</span><br><span class="line">  变量名1 数据类型 [not null][:&#x3D;默认值],</span><br><span class="line">    ...</span><br><span class="line">  变量名n 数据类型 [not null][:&#x3D;默认值]</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<h5 id="ROWTYPE"><a href="#ROWTYPE" class="headerlink" title="%ROWTYPE"></a>%ROWTYPE</h5><p>根据已有记录行自动推断类型 </p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var_row 表名%ROWTYPE</span><br></pre></td></tr></table></figure></div>



<h3 id="9-3-基本程序结构和语句"><a href="#9-3-基本程序结构和语句" class="headerlink" title="9.3 基本程序结构和语句"></a>9.3 基本程序结构和语句</h3><h4 id="9-3-1-程序块"><a href="#9-3-1-程序块" class="headerlink" title="9.3.1 程序块"></a>9.3.1 程序块</h4><p>PL/SQL程序以块为单位</p>
<ol>
<li>声明部分</li>
<li>执行部分</li>
<li>异常处理部分</li>
</ol>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[DECLARE]</span><br><span class="line">BEGIN</span><br><span class="line">[EXCEPTION]</span><br><span class="line">END</span><br></pre></td></tr></table></figure></div>

<p>示例：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SQL&gt; declare</span><br><span class="line">	  a int:&#x3D;100;</span><br><span class="line">	  b int:&#x3D;200;</span><br><span class="line">	  c number;</span><br><span class="line">	begin</span><br><span class="line">	  c:&#x3D;a+b;</span><br><span class="line">	  dbms_output.put_line(c);</span><br><span class="line">	exception</span><br><span class="line">	  when zero_divide then</span><br><span class="line">        dbms_output.put_line(&quot;除数不能为0&quot;);</span><br><span class="line">	end;</span><br></pre></td></tr></table></figure></div>



<h4 id="9-3-2-选择语句"><a href="#9-3-2-选择语句" class="headerlink" title="9.3.2 选择语句"></a>9.3.2 选择语句</h4><ol>
<li><p><strong>if…then</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">BEGIN</span><br><span class="line">	if 1 &gt; 0 then</span><br><span class="line">		dbms_output.put_line(&#39;yes&#39;);</span><br><span class="line">	end if;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>if…then…else</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">BEGIN</span><br><span class="line">	if -1 &gt; 0 then</span><br><span class="line">		dbms_output.put_line(&#39;yes&#39;);</span><br><span class="line">	else </span><br><span class="line">	    dbms_output.put_line(&#39;no&#39;);</span><br><span class="line">  end if;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>if…then…elsif</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">  num NUMBER:&#x3D;0;</span><br><span class="line">BEGIN</span><br><span class="line">  if num &gt; 0 then</span><br><span class="line">    dbms_output.put_line(&#39;&gt;&#39;);</span><br><span class="line">  elsif num &#x3D; 0 then</span><br><span class="line">    dbms_output.put_line(&#39;&#x3D;&#x3D;&#39;);</span><br><span class="line">  end if;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure></div>



</li>
</ol>
<h4 id="9-3-3-循环语句"><a href="#9-3-3-循环语句" class="headerlink" title="9.3.3 循环语句"></a>9.3.3 循环语句</h4><ol>
<li><p><strong>while</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">  num NUMBER :&#x3D; 0;</span><br><span class="line">BEGIN</span><br><span class="line">  while num &lt; 10 loop</span><br><span class="line">    dbms_output.put_line(num);</span><br><span class="line">    num :&#x3D; num + 1;</span><br><span class="line">  end loop;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>for</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">BEGIN</span><br><span class="line">  for i in reverse 5..10 loop</span><br><span class="line">	  dbms_output.put_line(i);</span><br><span class="line">  end loop;</span><br><span class="line">END;</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">10</span><br><span class="line">9</span><br><span class="line">8</span><br><span class="line">7</span><br><span class="line">6</span><br><span class="line">5</span><br></pre></td></tr></table></figure></div>

<p>其中，[reverse]可选，不写就是递增。写了就是递减。后面给一个范围。</p>
</li>
</ol>
<h4 id="9-3-4-选择和跳转"><a href="#9-3-4-选择和跳转" class="headerlink" title="9.3.4 选择和跳转"></a>9.3.4 选择和跳转</h4><ol>
<li><p><strong>case</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">	num NUMBER :&#x3D; 2;</span><br><span class="line">BEGIN</span><br><span class="line">	case num</span><br><span class="line">		when 1 then</span><br><span class="line">			dbms_output.put_line(1);</span><br><span class="line">		when 2 then</span><br><span class="line">			dbms_output.put_line(2);</span><br><span class="line">			dbms_output.put_line(&#39;...&#39;);</span><br><span class="line">		when 3 then</span><br><span class="line">			dbms_output.put_line(3);</span><br><span class="line">		end case;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>GOTO</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">	num NUMBER :&#x3D; 0;</span><br><span class="line">BEGIN</span><br><span class="line">	while num &lt; 5 loop </span><br><span class="line">		&lt;&lt;top&gt;&gt;</span><br><span class="line">		num :&#x3D; num + 1;</span><br><span class="line">		if num &#x3D; 3 then</span><br><span class="line">			goto top;</span><br><span class="line">		end if;</span><br><span class="line">		dbms_output.put_line(num);</span><br><span class="line">	end loop;</span><br><span class="line">END;</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td></tr></table></figure></div>



</li>
</ol>
<h4 id="9-3-5-异常"><a href="#9-3-5-异常" class="headerlink" title="9.3.5 异常"></a>9.3.5 异常</h4><ol>
<li><p><strong>异常处理语法</strong>（及自定义异常）</p>
<ul>
<li>声明异常</li>
<li>为内部异常命名</li>
<li>异常定义</li>
<li>异常处理</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">	num NUMBER :&#x3D; 0;</span><br><span class="line">	my_exception EXCEPTION; -- 声明异常</span><br><span class="line">	my_exception2 EXCEPTION;</span><br><span class="line">	my_exception3 EXCEPTION;</span><br><span class="line">	PRAGMA EXCEPTION_INIT(my_exception, -8888);	-- 为内部异常命名,关联错误编号(要负数)和异常名</span><br><span class="line">BEGIN</span><br><span class="line">	if num &#x3D; 0 then</span><br><span class="line">		RAISE my_exception3;	-- 抛出异常</span><br><span class="line">	end if;</span><br><span class="line"></span><br><span class="line">EXCEPTION</span><br><span class="line">	when my_exception then	-- 接受处理异常</span><br><span class="line">		dbms_output.put_line(&#39;my_exception&#39;);</span><br><span class="line">	when my_exception2 then</span><br><span class="line">		dbms_output.put_line(&#39;my_exception2&#39;);</span><br><span class="line">	when others then</span><br><span class="line">		dbms_output.put_line(&#39;other&#39;);</span><br><span class="line">END;</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">other</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>预定义异常</strong></p>
<p>系统内部预定义的异常。（太多了，去百度查把）</p>
</li>
<li><p><strong>空操作和空值</strong></p>
<p>即，占位。可以在IF语句中直接用NULL来占位，表示什么都不做。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">	num NUMBER :&#x3D; 0;</span><br><span class="line">BEGIN</span><br><span class="line">	if num &#x3D; 0 then</span><br><span class="line">		NULL;</span><br><span class="line">	end if;</span><br><span class="line">	dbms_output.put_line(&#39;hello oracle&#39;);</span><br><span class="line">END;</span><br></pre></td></tr></table></figure></div>



</li>
</ol>
<h3 id="9-4-系统内置函数"><a href="#9-4-系统内置函数" class="headerlink" title="9.4 系统内置函数"></a>9.4 系统内置函数</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from dual	-- dual是一个临时表，系统内置的。用这些函数要from表，所以用一个临时表来计算</span><br></pre></td></tr></table></figure></div>



<h5 id="9-4-1-字符类"><a href="#9-4-1-字符类" class="headerlink" title="9.4.1 字符类"></a>9.4.1 字符类</h5><h6 id="ASCII-ch-字符转数字"><a href="#ASCII-ch-字符转数字" class="headerlink" title="ASCII(ch) 字符转数字"></a>ASCII(ch) 字符转数字</h6><p>用于返回对应字符的ASCII码</p>
<h6 id="CHR-i-数字转字符"><a href="#CHR-i-数字转字符" class="headerlink" title="CHR(i) 数字转字符"></a>CHR(i) 数字转字符</h6><p>用于返回ASCII码对应的字符</p>
<h6 id="CONCAT-s1-s2-字符串连接"><a href="#CONCAT-s1-s2-字符串连接" class="headerlink" title="CONCAT(s1,s2) 字符串连接"></a>CONCAT(s1,s2) 字符串连接</h6><p>将S2连接到S1后面</p>
<h6 id="INICAP-s-首字母大写"><a href="#INICAP-s-首字母大写" class="headerlink" title="INICAP(s) 首字母大写"></a>INICAP(s) 首字母大写</h6><p>将s中的单词，首字母大写。单词之间用空格、控制符、标点符号来区分。</p>
<h6 id="INSTR-s1-s2-i-j-查询子字符串"><a href="#INSTR-s1-s2-i-j-查询子字符串" class="headerlink" title="INSTR(s1,s2[,i] [,j]) 查询子字符串"></a>INSTR(s1,s2[,i] [,j]) 查询子字符串</h6><p>查找<strong>s2</strong>在<strong>s1</strong>中，从<strong>i</strong>位置开始，第<strong>j</strong>次出现的位置。（<strong>下标从1开始，如果i是负数，则反向查找。但是返回的下标还是正序</strong>）。没找到返回0</p>
<h6 id="LENGTH-s-计算长度"><a href="#LENGTH-s-计算长度" class="headerlink" title="LENGTH(s) 计算长度"></a>LENGTH(s) 计算长度</h6><p>如果s为null，那么返回值为null</p>
<h6 id="LOWER-s-UPPER-s-小-大写"><a href="#LOWER-s-UPPER-s-小-大写" class="headerlink" title="LOWER(s) / UPPER(s) 小/大写"></a>LOWER(s) / UPPER(s) 小/大写</h6><p> 所有字母转为大小写</p>
<h6 id="LTRIM-s1-s2-RTRIM-TRIM-左-右-左右清除字符串"><a href="#LTRIM-s1-s2-RTRIM-TRIM-左-右-左右清除字符串" class="headerlink" title="LTRIM(s1,s2) / RTRIM / TRIM 左/右/左右清除字符串"></a>LTRIM(s1,s2) / RTRIM / TRIM 左/右/左右清除字符串</h6><p>删除字符串s1中左侧/右侧/两端的s2（如果不写s2，那么默认空格）</p>
<h6 id="REPLACE-s1-s2-s3-替换"><a href="#REPLACE-s1-s2-s3-替换" class="headerlink" title="REPLACE(s1,s2[,s3]) 替换"></a>REPLACE(s1,s2[,s3]) 替换</h6><p>用s3替换s1中出现s2的所有地方（s3默认是空字符串）</p>
<h6 id="SUBSTR-s-i-j-取子串"><a href="#SUBSTR-s-i-j-取子串" class="headerlink" title="SUBSTR(s,i[,j]) 取子串"></a>SUBSTR(s,i[,j]) 取子串</h6><p>截取字符串s，从i开始，长度为j的字符串（如果省略j，默认取到尾部）</p>
<h5 id="9-4-2-数字类"><a href="#9-4-2-数字类" class="headerlink" title="9.4.2 数字类"></a>9.4.2 数字类</h5><h6 id="ABS-n-绝对值"><a href="#ABS-n-绝对值" class="headerlink" title="ABS(n) 绝对值"></a>ABS(n) 绝对值</h6><h6 id="CELL-n-向上取整"><a href="#CELL-n-向上取整" class="headerlink" title="CELL(n) 向上取整"></a>CELL(n) 向上取整</h6><h6 id="COS-n-余弦【2PI-360°】"><a href="#COS-n-余弦【2PI-360°】" class="headerlink" title="COS(n) 余弦【2PI = 360°】"></a>COS(n) 余弦【2PI = 360°】</h6><h6 id="EXP-n-n次幂"><a href="#EXP-n-n次幂" class="headerlink" title="EXP(n) n次幂"></a>EXP(n) n次幂</h6><h6 id="FLOOR-n-向下取整"><a href="#FLOOR-n-向下取整" class="headerlink" title="FLOOR(n) 向下取整"></a>FLOOR(n) 向下取整</h6><h6 id="LOG-n1-n2-对数"><a href="#LOG-n1-n2-对数" class="headerlink" title="LOG(n1,n2) 对数"></a>LOG(n1,n2) 对数</h6><h6 id="MOD-n1-n2-取余"><a href="#MOD-n1-n2-取余" class="headerlink" title="MOD(n1,n2) 取余"></a>MOD(n1,n2) 取余</h6><h6 id="POWER-n1-n2-次方"><a href="#POWER-n1-n2-次方" class="headerlink" title="POWER(n1,n2) 次方"></a>POWER(n1,n2) 次方</h6><h6 id="ROUND-n1-n2-四舍五入"><a href="#ROUND-n1-n2-四舍五入" class="headerlink" title="ROUND(n1,n2) 四舍五入"></a>ROUND(n1,n2) 四舍五入</h6><p>n2是小数点右边几位（要整数）。如果n2是负数，截尾在小数点左边</p>
<h6 id="SIGN-n"><a href="#SIGN-n" class="headerlink" title="SIGN(n)"></a>SIGN(n)</h6><p>负数返回-1，0返回0，正数返回1</p>
<h6 id="SQTR-n-开方"><a href="#SQTR-n-开方" class="headerlink" title="SQTR(n) 开方"></a>SQTR(n) 开方</h6><h6 id="TRUNC-n1-n2-截取小数"><a href="#TRUNC-n1-n2-截取小数" class="headerlink" title="TRUNC(n1,n2) 截取小数"></a>TRUNC(n1,n2) 截取小数</h6><p>截取小数点n2位的数，默认0。如果n2是负数，截尾在小数点左边</p>
<h5 id="9-4-3-日期和时间类"><a href="#9-4-3-日期和时间类" class="headerlink" title="9.4.3 日期和时间类"></a>9.4.3 日期和时间类</h5><h6 id="ADD-MONTHS-d-i"><a href="#ADD-MONTHS-d-i" class="headerlink" title="ADD_MONTHS(d,i)"></a>ADD_MONTHS(d,i)</h6><p>当前日期d加上i个月</p>
<h6 id="LAST-DAY-d"><a href="#LAST-DAY-d" class="headerlink" title="LAST_DAY(d)"></a>LAST_DAY(d)</h6><p>返回d日期，该月最后一天</p>
<h6 id="NEW-TIME-d1-t1-t2"><a href="#NEW-TIME-d1-t1-t2" class="headerlink" title="NEW_TIME(d1,t1,t2)"></a>NEW_TIME(d1,t1,t2)</h6><p>时区转换？将t1时区中的d1时间转换成t2时区的时间</p>
<h6 id="SYSDATE-当前时间"><a href="#SYSDATE-当前时间" class="headerlink" title="SYSDATE() 当前时间"></a>SYSDATE() 当前时间</h6><h5 id="9-4-4-转换类"><a href="#9-4-4-转换类" class="headerlink" title="9.4.4 转换类"></a>9.4.4 转换类</h5><p>to_char(日期变量, ‘YYYY-MM-DD’)</p>
<h3 id="9-5-自定义函数"><a href="#9-5-自定义函数" class="headerlink" title="9.5 自定义函数"></a>9.5 自定义函数</h3><p><strong>函数必须有返回值！</strong></p>
<h4 id="9-5-1-函数的定义"><a href="#9-5-1-函数的定义" class="headerlink" title="9.5.1 函数的定义"></a>9.5.1 函数的定义</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create or replace function my_fun(num NUMBER) return number is</span><br><span class="line">	var_tmp number;</span><br><span class="line">BEGIN</span><br><span class="line">	var_tmp :&#x3D; num + 1;</span><br><span class="line">	return(var_tmp);</span><br><span class="line">END;</span><br></pre></td></tr></table></figure></div>

<p>其中 <code>or replace</code> 可选，如果存在会替换。return 后面跟着类型，begin 和 end之间要有return语句。</p>
<h4 id="9-5-2-函数的调用"><a href="#9-5-2-函数的调用" class="headerlink" title="9.5.2 函数的调用"></a>9.5.2 函数的调用</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">BEGIN</span><br><span class="line">	dbms_output.put_line(&#39;new number: &#39; || my_fun(0));</span><br><span class="line">END;</span><br></pre></td></tr></table></figure></div>



<h4 id="9-5-3-函数的删除"><a href="#9-5-3-函数的删除" class="headerlink" title="9.5.3 函数的删除"></a>9.5.3 函数的删除</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">drop function my_fun;</span><br></pre></td></tr></table></figure></div>



<h3 id="9-6-游标"><a href="#9-6-游标" class="headerlink" title="9.6 游标"></a>9.6 游标</h3><p>类似C语言指针对查询结果集进行操作。</p>
<h4 id="9-6-1-显示游标"><a href="#9-6-1-显示游标" class="headerlink" title="9.6.1 显示游标"></a>9.6.1 显示游标</h4><h5 id="声明游标"><a href="#声明游标" class="headerlink" title="声明游标"></a>声明游标</h5><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cursor 游标名[(参数名 参数类型[:&#x3D;默认值])...]</span><br><span class="line">[return 返回类型]</span><br><span class="line">is select语句;</span><br></pre></td></tr></table></figure></div>

<p>返回语句可以不写，如果写了select查询结果的类型则必须要符合返回类型。</p>
<p>参数主要是用来放在select语句的where中用的。</p>
<h5 id="打开游标"><a href="#打开游标" class="headerlink" title="打开游标"></a>打开游标</h5><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">open 游标名(参数列表);</span><br></pre></td></tr></table></figure></div>

<p>打开以后，游标会指向select的结果集的第一个记录之前的位置。（有一个属性%found用来判断游标是否有数据）</p>
<h5 id="读取游标"><a href="#读取游标" class="headerlink" title="读取游标"></a>读取游标</h5><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">fetch 游标名 into 变量名;</span><br></pre></td></tr></table></figure></div>

<p>将游标指向下一个位置，并且把指向的记录赋值给变量。（最后一条记录之后的记录 和 第一条之前的记录都是不存在的。调用会报错）。一般配合循环语句while。</p>
<h5 id="关闭游标"><a href="#关闭游标" class="headerlink" title="关闭游标"></a>关闭游标</h5><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">close 游标名;</span><br></pre></td></tr></table></figure></div>



<h5 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h5><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">    -- 声明游标(这是一个游标变量，类型是后面select返回的记录类型)</span><br><span class="line">    cursor cursor_stu(var_age NUMBER:&#x3D;18) is select * from student where age &#x3D; var_age;</span><br><span class="line">   </span><br><span class="line">    -- 定义临时存放游标的记录类型</span><br><span class="line">    var_tmp student%ROWTYPE;</span><br><span class="line">BEGIN</span><br><span class="line">    -- 打开游标</span><br><span class="line">    open cursor_stu(17);</span><br><span class="line">    </span><br><span class="line">    -- 读取游标（这里要先获取一次，移动到第一条记录，不然条件过不了）</span><br><span class="line">    fetch cursor_stu into var_tmp;</span><br><span class="line">    while cursor_stu%found loop</span><br><span class="line">        dbms_output.put_line(&#39;姓名：&#39;||var_tmp.name||&#39;;年龄：&#39;||var_tmp.age||&#39;出生日期：&#39;||var_tmp.birthday);</span><br><span class="line">        fetch cursor_stu into var_tmp;	-- 读取下一条</span><br><span class="line">    end loop;</span><br><span class="line">    </span><br><span class="line">    -- 关闭游标</span><br><span class="line">    close cursor_stu;</span><br><span class="line">END;	-- 注意结尾END后面还有一个分号（;）</span><br></pre></td></tr></table></figure></div>



<h4 id="9-6-2-隐式游标"><a href="#9-6-2-隐式游标" class="headerlink" title="9.6.2 隐式游标"></a>9.6.2 隐式游标</h4><p>这个一般适用于update、delete这样的处理数据的操纵语句。（就是那个结果：Affected rows: 1）</p>
<p>使用时需要在属性前面加上隐式游标的默认名称——SQL</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">BEGIN</span><br><span class="line">	update student set age &#x3D; 18 where age &#x3D; 12;</span><br><span class="line">	if SQL%notfound then</span><br><span class="line">		dbms_output.put_line(&#39;没有数据被修改&#39;);</span><br><span class="line">	else</span><br><span class="line">		dbms_output.put_line(&#39;修改的行数：&#39;||SQL%rowcount);</span><br><span class="line">	end if;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure></div>



<h4 id="9-6-3-游标变量"><a href="#9-6-3-游标变量" class="headerlink" title="9.6.3 游标变量"></a>9.6.3 游标变量</h4><h5 id="声明游标变量"><a href="#声明游标变量" class="headerlink" title="声明游标变量"></a>声明游标变量</h5><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">type 游标变量类型名 is ref cursor</span><br><span class="line">return 返回类型;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>返回类型是记录类型</li>
</ul>
<h5 id="打开游标变量"><a href="#打开游标变量" class="headerlink" title="打开游标变量"></a>打开游标变量</h5><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">open 游标变量 for select语句;</span><br></pre></td></tr></table></figure></div>



<h5 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h5><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">	-- 定义游标变量类型（type_stu_ref是一个游标类型，类型是student%ROWTYPE）</span><br><span class="line">	type type_stu_ref is ref cursor return student%ROWTYPE;</span><br><span class="line">	-- 定义游标变量（cursor_stu是一个游标，类型是type_stu_red）</span><br><span class="line">	cursor_stu type_stu_ref;	</span><br><span class="line">	</span><br><span class="line">	-- 自定义类型（匹配游标变量类型的）</span><br><span class="line">	type my_type is RECORD(</span><br><span class="line">		name student.name%TYPE,</span><br><span class="line">		age student.age%TYPE,</span><br><span class="line">		birthday student.birthday%TYPE</span><br><span class="line">	);</span><br><span class="line">	-- 利用自定义临时变量（var_tmp%TYPE 和 my_type 和 type_stu_ref 都是匹配的）</span><br><span class="line">	var_tmp my_type; </span><br><span class="line">BEGIN</span><br><span class="line">	-- 打开游标</span><br><span class="line">	open cursor_stu for select * from student where age &#x3D; 17;</span><br><span class="line">	</span><br><span class="line">	--读取游标</span><br><span class="line">	fetch cursor_stu into var_tmp;</span><br><span class="line">	while cursor_stu%found loop</span><br><span class="line">		dbms_output.put_line(&#39;姓名：&#39;||var_tmp.name||&#39;;年龄：&#39;||var_tmp.age||&#39;出生日期：&#39;||var_tmp.birthday);</span><br><span class="line">		fetch cursor_stu into var_tmp;</span><br><span class="line">	end loop;</span><br><span class="line">	</span><br><span class="line">	-- 关闭游标(使用关闭后的游标是非法的)</span><br><span class="line">	close cursor_stu;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure></div>



<h4 id="9-6-4-游标表达式（暂无，书上没例子）"><a href="#9-6-4-游标表达式（暂无，书上没例子）" class="headerlink" title="9.6.4 游标表达式（暂无，书上没例子）"></a>9.6.4 游标表达式（暂无，书上没例子）</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CURSOR(subquery)</span><br></pre></td></tr></table></figure></div>



<h2 id="十、程序包"><a href="#十、程序包" class="headerlink" title="十、程序包"></a>十、程序包</h2><h3 id="10-1-程序包的规范"><a href="#10-1-程序包的规范" class="headerlink" title="10.1 程序包的规范"></a>10.1 程序包的规范</h3><p>其实就类似JAVA的接口或者抽象类，只是声明了变量、类型、游标、函数、过程等，而没有具体的实现。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create [or replace] package 程序包规范名 is</span><br><span class="line">    [declare_variable];</span><br><span class="line">    [declare_type];</span><br><span class="line">    [declare_cursor];</span><br><span class="line">    [declare_function];</span><br><span class="line">    -- 如：function fun_avg_sal(num_deptno number) return number;</span><br><span class="line">    [declare_procedure];</span><br><span class="line">    -- 如：procedure pro_regulate_sal(var_job varchar2);</span><br><span class="line">end [包名];</span><br></pre></td></tr></table></figure></div>



<h3 id="10-2-程序包的主体"><a href="#10-2-程序包的主体" class="headerlink" title="10.2 程序包的主体"></a>10.2 程序包的主体</h3><p>在主体中实现对应“规范”中声明的函数和存储过程，就像JAVA中对接口或者抽象类进行实现。如果没有实现，直接调用规范里的声明会报错。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create [or replace] package body 程序包规范名（这里同名噢，前面多了一个body关键字） is</span><br><span class="line">    [程序包主体的内部变量]</span><br><span class="line">    [游标主体]</span><br><span class="line">    [从“规范”中引入的函数头部声明]</span><br><span class="line">    function fun_avg_sal(num_deptno number) return number is</span><br><span class="line">    	num_avg_sal number; -- 定义内部变量</span><br><span class="line">    begin</span><br><span class="line">        spl语句;</span><br><span class="line">    [exception]</span><br><span class="line">        ...</span><br><span class="line">    end [fun_avg_sal];</span><br><span class="line">    -- 过程也是一样</span><br><span class="line">end 包名;</span><br></pre></td></tr></table></figure></div>



<h2 id="十一、存储过程"><a href="#十一、存储过程" class="headerlink" title="十一、存储过程"></a>十一、存储过程</h2><p>和函数基本一样，就是少了一个返回类型。</p>
<p>不能在SQL语句中被调用。</p>
<h3 id="11-1-创建-存储过程"><a href="#11-1-创建-存储过程" class="headerlink" title="11.1 创建 存储过程"></a>11.1 创建 存储过程</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create [or replace] procedure 存储过程名[(参数列表...)] is | as</span><br><span class="line">begin</span><br><span class="line">	plsql语句;</span><br><span class="line">[exception]</span><br><span class="line">	...</span><br><span class="line">end [存储过程名];</span><br></pre></td></tr></table></figure></div>



<h3 id="11-2-调用-存储过程"><a href="#11-2-调用-存储过程" class="headerlink" title="11.2 调用 存储过程"></a>11.2 调用 存储过程</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">execute 存储过程名;</span><br></pre></td></tr></table></figure></div>

<p>也可以在PL/SQL块中使用：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">begin</span><br><span class="line">	存储过程名;</span><br><span class="line">end</span><br></pre></td></tr></table></figure></div>



<h3 id="11-3-删除-存储过程"><a href="#11-3-删除-存储过程" class="headerlink" title="11.3 删除 存储过程"></a>11.3 删除 存储过程</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">drop 存储过程名;</span><br></pre></td></tr></table></figure></div>



<h2 id="十二、触发器"><a href="#十二、触发器" class="headerlink" title="十二、触发器"></a>十二、触发器</h2><p>就是在指定对象上执行某操作的前后进行一些自己的操作，或者用自己的操作直接替换掉该操作。</p>
<h3 id="12-1-创建-触发器"><a href="#12-1-创建-触发器" class="headerlink" title="12.1 创建 触发器"></a>12.1 创建 触发器</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create [or replace] trigger 触发器名</span><br><span class="line">	[before | after | instead of] 触发事件（如：insert、update、create等）</span><br><span class="line">	on 表名 | 视图名 | 用户模式名 | 数据库名</span><br><span class="line">	[for each row [when 条件]]</span><br><span class="line">begin</span><br><span class="line">	plsql语句;</span><br><span class="line">end 触发器名;</span><br></pre></td></tr></table></figure></div>

<p><strong>解释：</strong>在（表 | 视图 | 用户模式 | 数据库）上进行insert、update、create等操作时，在执行该操作的前（before）、后（after）执行的plsql，或者用plsql语句代替该操作。如果设置了行级触发器（for each row）那么对于每一行的操作都会触发一次，还可以增加条件，使符合条件的执行触发器。如果米有指定行级触发器那么不管操作了多少行数据，都只会触发一次。</p>
<h3 id="12-2-启用-禁用-触发器"><a href="#12-2-启用-禁用-触发器" class="headerlink" title="12.2 启用/禁用 触发器"></a>12.2 启用/禁用 触发器</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter trigger [schema.]触发器名 DISABLE | ENABLE;</span><br></pre></td></tr></table></figure></div>



<h3 id="12-3-删除-触发器"><a href="#12-3-删除-触发器" class="headerlink" title="12.3 删除 触发器"></a>12.3 删除 触发器</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">drop trigger 触发器名;</span><br></pre></td></tr></table></figure></div>

</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">IT小王</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://wangbowen.cn/2020/03/02/Oracle%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">https://wangbowen.cn/2020/03/02/Oracle%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://wangbowen.cn">IT小王</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Oracle/">Oracle    </a></div><div class="post_share"><div class="social-share" data-image="/postImages/OracleCover.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/03/07/ZooKeeper%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><img class="prev_cover lazyload" data-src="/postImages/ZooKeeperCover.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>ZooKeeper学习笔记</span></div></a></div><div class="next-post pull_right"><a href="/2020/02/28/Linux%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><img class="next_cover lazyload" data-src="/postImages/LinuxCover.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>Linux学习笔记</span></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = false == true ? true : false;
var verify = false == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'iYYoev4NDSyr3HqlY1VVCTIV-gzGzoHsz',
  appKey:'Hli8dWTFUKrXj9FnhnSQUvRe',
  placeholder:'快来评论吖！ヾﾉ≧∀≦)o',
  avatar:'monsterid',
  guest_info:guest_info,
  pageSize:'10',
  lang:'en',
  recordIP: true
});</script></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By IT小王</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="icp"><a href="http://www.beian.miit.gov.cn" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"><span>闽ICP备18027071号-1</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="ribbon" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-nest.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>